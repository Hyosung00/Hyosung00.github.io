{"version":3,"file":"ConsoleView-aonTYntr.js","sources":["../../../miraedojeon/front/src/pages/Console/ConsoleView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Card, CardContent } from '@mui/material';\r\n\r\n// 각 타입별 설정\r\nconst CONFIG = {\r\n  treatAnalysis: {\r\n    title: '위험 노출도 및 공격 가능도 측정',\r\n    ariaLabel: '위험 노출도 및 공격 가능도 측정',\r\n    file: 'network_traffic.nodes.json',\r\n    animationSpeed: 50\r\n  },\r\n  targetIdentification: {\r\n    title: '네트워크 구조 분석 및 표적 식별',\r\n    ariaLabel: '네트워크 구조 분석 및 표적 식별',\r\n    file: 'network_traffic.nodes.json',\r\n    animationSpeed: 100\r\n  },\r\n  targetPriority: {\r\n    title: '핵심 표적 점수 분석',\r\n    ariaLabel: '핵심 표적 점수 분석',\r\n    file: 'network_traffic.nodes.json',\r\n    animationSpeed: 100\r\n  },\r\n  fusionDB: {\r\n    title: '융합 데이터베이스 구축',\r\n    ariaLabel: '융합 데이터베이스 구축',\r\n    file: 'network_traffic.nodes.json',\r\n    animationSpeed: 100\r\n  }\r\n};\r\n\r\nconst ConsoleView = ({ type = 'treatAnalysis', open = true, isPopup = false }) => {\r\n  const [jsonTable, setJsonTable] = useState(null);\r\n  const [displayedRows, setDisplayedRows] = useState(0);\r\n  const tableAnimationRef = React.useRef(null);\r\n  \r\n  const config = CONFIG[type] || CONFIG.treatAnalysis;\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setJsonTable(null);\r\n      setDisplayedRows(0);\r\n      loadFileContent();\r\n    } else {\r\n      if (tableAnimationRef.current) {\r\n        clearInterval(tableAnimationRef.current);\r\n        tableAnimationRef.current = null;\r\n      }\r\n      setJsonTable(null);\r\n      setDisplayedRows(0);\r\n    }\r\n    return () => {\r\n      if (tableAnimationRef.current) {\r\n        clearInterval(tableAnimationRef.current);\r\n      }\r\n    };\r\n  }, [open, type]);\r\n\r\n  const loadFileContent = async () => {\r\n    setJsonTable(null);\r\n    setDisplayedRows(0);\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/api/read-info-file?file=${config.file}`);\r\n      const text = await response.text();\r\n      try {\r\n        const json = JSON.parse(text);\r\n        if (Array.isArray(json) && json.length > 0 && typeof json[0] === 'object') {\r\n          setJsonTable(json);\r\n          animateTable(json.length);\r\n        }\r\n      } catch (e) {\r\n        // JSON 파싱 실패 시 무시\r\n      }\r\n    } catch (error) {\r\n      console.error('파일 로드 실패:', error);\r\n    }\r\n  };\r\n\r\n  const animateTable = (totalRows) => {\r\n    if (tableAnimationRef.current) {\r\n      clearInterval(tableAnimationRef.current);\r\n    }\r\n    \r\n    let currentRow = 0;\r\n    setDisplayedRows(0);\r\n    \r\n    tableAnimationRef.current = setInterval(() => {\r\n      if (currentRow < totalRows) {\r\n        currentRow++;\r\n        setDisplayedRows(currentRow);\r\n      } else {\r\n        clearInterval(tableAnimationRef.current);\r\n        tableAnimationRef.current = null;\r\n      }\r\n    }, config.animationSpeed);\r\n  };\r\n\r\n  return (\r\n    <Card \r\n      component=\"main\"\r\n      role=\"main\"\r\n      aria-label={config.ariaLabel}\r\n      sx={{\r\n        width: '100%',\r\n        height: isPopup ? '100%' : 'calc(100vh - 120px)',\r\n        bgcolor: 'background.paper',\r\n        boxShadow: 3,\r\n        m: 0\r\n      }}\r\n    >\r\n      <CardContent sx={{\r\n        p: 1,\r\n        height: '100%',\r\n        '&:last-child': { pb: 1 },\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'auto'\r\n      }}>\r\n        <div style={{\r\n          background: '#f0edfd',\r\n          color: '#39306b',\r\n          padding: '20px',\r\n          fontFamily: \"'Noto Sans KR', 'Malgun Gothic', 'Apple SD Gothic Neo', Arial, Helvetica, sans-serif\",\r\n          height: '100%',\r\n          fontSize: '14px',\r\n          lineHeight: '1.5',\r\n          overflow: 'auto',\r\n          borderRadius: '4px'\r\n        }}>\r\n          <div style={{ \r\n            borderBottom: '2px solid #39306b', \r\n            paddingBottom: '10px', \r\n            marginBottom: '20px' \r\n          }}>\r\n            <h2 style={{ margin: 0 }}>{config.title}</h2>\r\n            <div style={{ fontSize: '12px', opacity: 0.7 }}>\r\n              Loading ~ Neo4j - neo4j+s://eff16e19.databases.neo4j.io\r\n            </div>\r\n          </div>\r\n          \r\n          {jsonTable && (\r\n            <div style={{ marginTop: '24px', overflowX: 'auto' }}>\r\n              <table style={{ \r\n                borderCollapse: 'collapse', \r\n                width: '100%', \r\n                background: '#fff', \r\n                color: '#222', \r\n                fontSize: '13px',\r\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n              }}>\r\n                <thead>\r\n                  <tr>\r\n                    {Object.keys(jsonTable[0]).map((key) => (\r\n                      <th key={key} style={{ \r\n                        border: '1px solid #ddd', \r\n                        padding: '8px 12px', \r\n                        background: '#6858a3',\r\n                        color: '#fff',\r\n                        fontWeight: 'bold',\r\n                        textAlign: 'left'\r\n                      }}>\r\n                        {key}\r\n                      </th>\r\n                    ))}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {jsonTable.slice(0, displayedRows).map((row, i) => (\r\n                    <tr key={i} style={{ \r\n                      background: i % 2 === 0 ? '#fff' : '#f9f9f9'\r\n                    }}>\r\n                      {Object.keys(jsonTable[0]).map((key) => (\r\n                        <td key={key} style={{ \r\n                          border: '1px solid #ddd', \r\n                          padding: '8px 12px'\r\n                        }}>\r\n                          {typeof row[key] === 'object' ? JSON.stringify(row[key]) : row[key]}\r\n                        </td>\r\n                      ))}\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ConsoleView;\r\n"],"names":["CONFIG","treatAnalysis","title","ariaLabel","file","animationSpeed","targetIdentification","targetPriority","fusionDB","ConsoleView","type","open","isPopup","jsonTable","setJsonTable","useState","displayedRows","setDisplayedRows","tableAnimationRef","React","useRef","config","useEffect","loadFileContent","current","clearInterval","async","response","fetch","text","json","JSON","parse","Array","isArray","length","animateTable","e","error","totalRows","currentRow","setInterval","jsx","Card","component","role","sx","width","height","bgcolor","boxShadow","m","children","CardContent","p","pb","display","flexDirection","overflow","jsxs","style","background","color","padding","fontFamily","fontSize","lineHeight","borderRadius","borderBottom","paddingBottom","marginBottom","margin","opacity","marginTop","overflowX","borderCollapse","Object","keys","map","key","border","fontWeight","textAlign","slice","row","i","stringify"],"mappings":"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"}