{"version":3,"file":"index-DeChUPY-.js","sources":["../../../miraedojeon/front/src/pages/Osint&DataFusion/FusionDB/FusionDB.jsx","../../../miraedojeon/front/src/pages/Osint&DataFusion/OsintInfocollect/GeoIP.jsx"],"sourcesContent":["import React from 'react';\r\nimport ConsoleView from '../../Console/ConsoleView';\r\n\r\nconst FusionDB = ({ open = true, isPopup = false }) => {\r\n  return <ConsoleView type=\"fusionDB\" open={open} isPopup={isPopup} />;\r\n};\r\n\r\nexport default FusionDB;\r\n","import React, { useEffect, useRef, useState, useMemo, useCallback } from 'react';\r\nimport * as Cesium from 'cesium';\r\nimport { Box, Typography, Card, CardContent, Grid, IconButton, Slider, Dialog, DialogContent, DialogTitle } from '@mui/material';\r\nimport { FundOutlined, DatabaseOutlined, CloseOutlined } from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport FusionDBConsole from '../FusionDB/FusionDB';\r\nimport { usePopup } from '../../../context/PopupContext';\r\n\r\n// ==================== ìƒìˆ˜ ì •ì˜ ====================\r\nconst API_CONFIG = {\r\n  BASE_URL: 'http://localhost:5000',\r\n  ENDPOINTS: {\r\n    NORTH_KOREA_ATTACKS: '/api/north-korea-attacks'\r\n  },\r\n  DEFAULT_LIMIT: 20  // í•˜ë£¨ë‹¹ 20ê°œë¡œ ì œí•œ\r\n};\r\n\r\nconst COLORS = {\r\n  SOURCE: {\r\n    NORMAL: Cesium.Color.YELLOW,\r\n    OUTLINE: Cesium.Color.RED,\r\n    HIGHLIGHT: Cesium.Color.ORANGE\r\n  },\r\n  TARGET: {\r\n    NORMAL: Cesium.Color.CYAN,\r\n    OUTLINE: Cesium.Color.BLUE,\r\n    HIGHLIGHT: Cesium.Color.LIME\r\n  },\r\n  HIGHLIGHT_OUTLINE: Cesium.Color.WHITE\r\n};\r\n\r\nconst MARKER_SIZES = {\r\n  NORMAL: 8,\r\n  HIGHLIGHT: 12,\r\n  OUTLINE_WIDTH_NORMAL: 3,\r\n  OUTLINE_WIDTH_HIGHLIGHT: 4\r\n};\r\n\r\nconst ANIMATION_TIMINGS = {\r\n  SCROLL_DURATION: 1300,\r\n  PULSE_DURATION: 1200\r\n};\r\n\r\n// CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€\r\nconst style = document.createElement('style');\r\nstyle.textContent = `\r\n  @keyframes pulse {\r\n    0% { box-shadow: 0 0 10px rgba(124,58,237,0.4); }\r\n    50% { box-shadow: 0 0 20px rgba(124,58,237,0.6); }\r\n    100% { box-shadow: 0 0 10px rgba(124,58,237,0.4); }\r\n  }\r\n`;\r\ndocument.head.appendChild(style);\r\n\r\n// Cesium Ion Access Token ì„¤ì •\r\n// ì›ë³¸ í† í°\r\nCesium.Ion.defaultAccessToken = import.meta.env.VITE_CESIUM_ION_ACCESS_TOKEN || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzODNiZmZiNC04YTUxLTQ1YzgtOWU1Mi1kNDUyY2I2ZDRkNTQiLCJpZCI6MzQyNDEzLCJpYXQiOjE3NTgxNzMyNDh9.zZRyMPovg5ALhNtG2_E-0ED0qHqd_uQQnAG84eQUyG4';\r\n\r\n// ìˆ˜ì • ëœ í† í°\r\n// Cesium.Ion.defaultAccessToken = import.meta.env.VITE_CESIUM_ION_ACCESS_TOKEN || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiYmM5NTM1NC05YjlkLTQ3NmItOTRhYi0zOWFlNmRkOTU4OWEiLCJpZCI6MzUzNTE4LCJpYXQiOjE3NjEyNjk2OTh9.0pxPJQdwLFl9wTzqp60Zr1rbgPJLdhT00OaBhS84ORs';\r\n\r\n// AS ì •ë³´ ìƒì„± í•¨ìˆ˜\r\nconst generateAS = (country) => {\r\n  const asNumbers = {\r\n    'ì¤‘êµ­': ['AS4134 CHINANET', 'AS4837 CHINA169', 'AS9808 CMNET', 'AS24400 ALIBABA'],\r\n    'China': ['AS4134 CHINANET', 'AS4837 CHINA169', 'AS9808 CMNET', 'AS24400 ALIBABA'],\r\n    'ëŸ¬ì‹œì•„': ['AS8359 MTS', 'AS12389 ROSTELECOM', 'AS31133 MF-MGSM', 'AS42610 NCNET'],\r\n    'Russia': ['AS8359 MTS', 'AS12389 ROSTELECOM', 'AS31133 MF-MGSM', 'AS42610 NCNET'],\r\n    'ë¶í•œ': ['AS131279 STAR-KP', 'AS9769 DPRK-AS', 'AS17762 KPTC-AS'],\r\n    'North Korea': ['AS131279 STAR-KP', 'AS9769 DPRK-AS', 'AS17762 KPTC-AS'],\r\n    'ì´ë€': ['AS44244 IRANCELL', 'AS6736 BARIN', 'AS197207 MCCI', 'AS58224 TCI'],\r\n    'Iran': ['AS44244 IRANCELL', 'AS6736 BARIN', 'AS197207 MCCI', 'AS58224 TCI'],\r\n    'ë¯¸êµ­': ['AS15169 GOOGLE', 'AS8075 MICROSOFT', 'AS16509 AMAZON', 'AS32934 FACEBOOK'],\r\n    'United States': ['AS15169 GOOGLE', 'AS8075 MICROSOFT', 'AS16509 AMAZON', 'AS32934 FACEBOOK'],\r\n    'ì¼ë³¸': ['AS2516 KDDI', 'AS4713 NTT', 'AS2497 IIJ', 'AS7506 GMO'],\r\n    'Japan': ['AS2516 KDDI', 'AS4713 NTT', 'AS2497 IIJ', 'AS7506 GMO'],\r\n    'ë…ì¼': ['AS3320 DEUTSCHE', 'AS8881 1&1', 'AS20940 AKAMAI', 'AS24940 HETZNER'],\r\n    'Germany': ['AS3320 DEUTSCHE', 'AS8881 1&1', 'AS20940 AKAMAI', 'AS24940 HETZNER'],\r\n    'ì˜êµ­': ['AS2856 BT', 'AS5089 VIRGIN', 'AS12576 EE', 'AS13037 ZEN'],\r\n    'United Kingdom': ['AS2856 BT', 'AS5089 VIRGIN', 'AS12576 EE', 'AS13037 ZEN'],\r\n    'ëŒ€í•œë¯¼êµ­': ['AS9318 SKB', 'AS4766 KT', 'AS9644 LGU', 'AS17858 LG-DACOM'],\r\n    'South Korea': ['AS9318 SKB', 'AS4766 KT', 'AS9644 LGU', 'AS17858 LG-DACOM'],\r\n    'Burundi': ['AS37578 AS-KONNECT', 'AS37054 USAN', 'AS36945 ONATEL'],\r\n    'default': ['AS0 UNKNOWN']\r\n  };\r\n\r\n  const asList = asNumbers[country.name] || asNumbers['default'];\r\n  return asList[Math.floor(Math.random() * asList.length)];\r\n};\r\n\r\n// ==================== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ====================\r\n\r\n// Attack IDë¡œ ê³µê²© ì°¾ê¸° (íƒ€ì… ì•ˆì •ì„± ê°œì„ )\r\nconst findAttackById = (attacks, attackId) => {\r\n  if (!attacks || !attackId) return null;\r\n  return attacks.find(attack =>\r\n    attack.id === attackId ||\r\n    attack.id === attackId.toString() ||\r\n    attack.id === parseInt(attackId)\r\n  );\r\n};\r\n\r\n// ì—”í‹°í‹° ìƒ‰ìƒ ë³µì› (ì¤‘ë³µ ì½”ë“œ í†µí•©)\r\nconst resetEntityColors = (entity, entityId) => {\r\n  if (!entity || !entity.point) return;\r\n\r\n  const isSource = entityId.includes('source');\r\n  entity.point.color = isSource ? COLORS.SOURCE.NORMAL : COLORS.TARGET.NORMAL;\r\n  entity.point.outlineColor = isSource ? COLORS.SOURCE.OUTLINE : COLORS.TARGET.OUTLINE;\r\n  entity.point.outlineWidth = MARKER_SIZES.OUTLINE_WIDTH_NORMAL;\r\n  entity.point.pixelSize = MARKER_SIZES.NORMAL;\r\n};\r\n\r\n// ì—”í‹°í‹° í•˜ì´ë¼ì´íŠ¸ (ì¤‘ë³µ ì½”ë“œ í†µí•©)\r\nconst highlightEntity = (entity, isSource) => {\r\n  if (!entity || !entity.point) return;\r\n\r\n  entity.point.color = isSource ? COLORS.SOURCE.HIGHLIGHT : COLORS.TARGET.HIGHLIGHT;\r\n  entity.point.outlineColor = COLORS.HIGHLIGHT_OUTLINE;\r\n  entity.point.outlineWidth = MARKER_SIZES.OUTLINE_WIDTH_HIGHLIGHT;\r\n  entity.point.pixelSize = MARKER_SIZES.HIGHLIGHT;\r\n  entity.point.disableDepthTestDistance = Number.POSITIVE_INFINITY;\r\n};\r\n\r\n// ë¡œê·¸ë¡œ ìŠ¤í¬ë¡¤ (ì¤‘ë³µ ì½”ë“œ í†µí•©)\r\nconst scrollToLog = (attackId) => {\r\n  const el = document.getElementById(`log-${attackId}`);\r\n  if (el) {\r\n    el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    el.style.animation = `pulse ${ANIMATION_TIMINGS.PULSE_DURATION / 1000}s ease-out 1`;\r\n    setTimeout(() => { el.style.animation = ''; }, ANIMATION_TIMINGS.SCROLL_DURATION);\r\n  }\r\n};\r\n\r\n// APIì—ì„œ ì‹¤ì œ MongoDB ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ í¬ë§·íŒ…í•˜ëŠ” í•¨ìˆ˜\r\nconst fetchAndFormatAttackData = async (startDate = null, endDate = null) => {\r\n  try {\r\n    let url = `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.NORTH_KOREA_ATTACKS}?limit=${API_CONFIG.DEFAULT_LIMIT}`;\r\n\r\n    if (startDate) {\r\n      url += `&startDate=${startDate.toISOString()}`;\r\n    }\r\n    if (endDate) {\r\n      url += `&endDate=${endDate.toISOString()}`;\r\n    }\r\n\r\n    console.log('ğŸŒ API ìš”ì²­:', url);\r\n    const response = await fetch(url);\r\n    console.log('ğŸ“¡ API ì‘ë‹µ ìƒíƒœ:', response.status, response.statusText);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('ğŸ“¦ API ì‘ë‹µ ë°ì´í„°:', {\r\n      success: data.success,\r\n      count: data.count,\r\n      attacks: data.attacks?.length || 0\r\n    });\r\n\r\n    if (!data.success) {\r\n      console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', data.error);\r\n      return [];\r\n    }\r\n\r\n    console.log(`âœ… ${data.count}ê°œì˜ ê³µê²© ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.`);\r\n    console.log('ğŸ“Š [2D] ì „ì²´ ì‘ì „ ë°ì´í„°:', data.attacks);\r\n\r\n    // API ë°ì´í„°ë¥¼ ê¸°ì¡´ í˜•ì‹ì— ë§ê²Œ ë³€í™˜\r\n    const attacks = data.attacks.map((attack) => {\r\n      return {\r\n        id: attack.id,\r\n        source: {\r\n          name: attack.source.name,\r\n          building: {\r\n            name: attack.source.city || attack.source.name,\r\n            lat: attack.source.lat,\r\n            lon: attack.source.lon\r\n          },\r\n          ip: attack.source.ip,\r\n          port: attack.source.port,\r\n          subnet: attack.source.subnet,\r\n          gateway: attack.source.gateway,\r\n          dns: attack.source.dns,\r\n          as: generateAS({ name: attack.source.name })\r\n        },\r\n        target: {\r\n          name: attack.target.name,\r\n          building: {\r\n            name: attack.target.city || 'North Korea',\r\n            lat: attack.target.lat,\r\n            lon: attack.target.lon\r\n          },\r\n          ip: attack.target.ip,\r\n          port: attack.target.port,\r\n          subnet: attack.target.subnet,\r\n          gateway: attack.target.gateway,\r\n          dns: attack.target.dns,\r\n          as: generateAS({ name: 'North Korea' })\r\n        },\r\n        type: attack.protocol,\r\n        severity: Math.min(5, Math.ceil(attack.count / 5)),\r\n        timestamp: new Date(attack.timestamp),\r\n        status: attack.status,\r\n        count: attack.count\r\n      };\r\n    });\r\n\r\n    // ë³€í™˜ëœ ì‘ì „ ë°ì´í„°ë¥¼ ëª¨ë‘ ë¡œê·¸ë¡œ ì¶œë ¥\r\n    console.log('ğŸ” [2D] ë³€í™˜ëœ ì‘ì „ ë°ì´í„° (ì „ì²´):', attacks);\r\n    attacks.forEach((attack, index) => {\r\n      console.log(`\\n[2D ì‘ì „ ${index + 1}/${attacks.length}]`, {\r\n        id: attack.id,\r\n        type: attack.type,\r\n        ì¶œë°œì§€: {\r\n          êµ­ê°€: attack.source.name,\r\n          ë„ì‹œ: attack.source.building.name,\r\n          IP: attack.source.ip,\r\n          Port: attack.source.port,\r\n          ì¢Œí‘œ: `${attack.source.building.lat}, ${attack.source.building.lon}`,\r\n          Subnet: attack.source.subnet,\r\n          Gateway: attack.source.gateway,\r\n          DNS: attack.source.dns,\r\n          AS: attack.source.as\r\n        },\r\n        ëª©í‘œì§€: {\r\n          êµ­ê°€: attack.target.name,\r\n          ë„ì‹œ: attack.target.building.name,\r\n          IP: attack.target.ip,\r\n          Port: attack.target.port,\r\n          ì¢Œí‘œ: `${attack.target.building.lat}, ${attack.target.building.lon}`,\r\n          Subnet: attack.target.subnet,\r\n          Gateway: attack.target.gateway,\r\n          DNS: attack.target.dns,\r\n          AS: attack.target.as\r\n        },\r\n        ì‹¬ê°ë„: attack.severity,\r\n        ì¹´ìš´íŠ¸: attack.count,\r\n        ìƒíƒœ: attack.status,\r\n        ì‹œê°„: attack.timestamp\r\n      });\r\n    });\r\n\r\n    console.log(`âœ… ${attacks.length}ê°œ ì‘ì „ ë³€í™˜ ì™„ë£Œ`);\r\n    return attacks;\r\n  } catch (error) {\r\n    console.error('âŒ API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜:', error);\r\n    console.error('âŒ ì—ëŸ¬ ìƒì„¸:', error.message, error.stack);\r\n    return [];\r\n  }\r\n};\r\n\r\n\r\nconst TwoDPage = () => {\r\n  const navigate = useNavigate();\r\n  const cesiumContainer = useRef(null);\r\n  const viewer = useRef(null);\r\n\r\n  const logListRef = useRef(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [attacks, setAttacks] = useState([]);\r\n\r\n  // í†µí•© PopupContext ì‚¬ìš©\r\n  const { popups, openPopup, closePopup } = usePopup();\r\n  const fusionDBOpen = popups.fusionDB;\r\n\r\n  // ë©”ë‰´ì—ì„œ íŒì—… ì˜¤í”ˆ ìš”ì²­ ì‹œ ìë™ìœ¼ë¡œ ì—´ë¦¬ë„ë¡\r\n  useEffect(() => {\r\n    if (popups.fusionDB) {\r\n      // íŒì—…ì´ ì´ë¯¸ ì—´ë ¤ìˆìœ¼ë©´ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ\r\n    }\r\n  }, [popups.fusionDB]);\r\n\r\n  // ë‚ ì§œ ë° ì‹œê°„ í•„í„°ë§ ìƒíƒœ\r\n  const [allAttacks, setAllAttacks] = useState([]); // ì „ì²´ ë°ì´í„° ì €ì¥ (ì¼ì£¼ì¼, í•˜ë£¨ë‹¹ 20ê°œ = ì´ 140ê°œ)\r\n  const [timeRange, setTimeRange] = useState([0, 7]); // ì‹œê°„ ë²”ìœ„ (ì¼ ë‹¨ìœ„, 0ì¼~7ì¼)\r\n\r\n  // attackStatsë¥¼ useMemoë¡œ ìµœì í™” (attacksê°€ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°)\r\n  const attackStats = useMemo(() => {\r\n    if (!attacks || attacks.length === 0) {\r\n      return { total: 0, active: 0, blocked: 0, countries: 0 };\r\n    }\r\n\r\n    return {\r\n      total: attacks.length,\r\n      active: attacks.length,\r\n      blocked: 0,\r\n      countries: new Set([\r\n        ...attacks.map(a => a.source.name),\r\n        ...attacks.map(a => a.target.name)\r\n      ]).size\r\n    };\r\n  }, [attacks]);\r\n\r\n  // ì‹œì‘ ë‚ ì§œ ì„¤ì • (9/2 00:00:00)\r\n  const startDate = useMemo(() => {\r\n    const date = new Date('2025-09-02T00:00:00Z');\r\n    return date;\r\n  }, []);\r\n\r\n  // ì¢…ë£Œ ë‚ ì§œ ì„¤ì • (9/8 23:59:59 - 7ì¼ê°„)\r\n  const endDate = useMemo(() => {\r\n    const date = new Date('2025-09-08T23:59:59Z');\r\n    return date;\r\n  }, []);\r\n\r\n  // í˜„ì¬ ì‹œê°„ë°” ìœ„ì¹˜ì— ë”°ë¥¸ í•„í„°ë§ëœ ì‘ì „ ë°ì´í„°\r\n  const filteredAttacks = useMemo(() => {\r\n    console.log('ğŸ”„ filteredAttacks useMemo ì‹¤í–‰');\r\n    console.log('  - allAttacks ê¸¸ì´:', allAttacks ? allAttacks.length : 'null');\r\n    console.log('  - timeRange:', timeRange);\r\n\r\n    if (!allAttacks || allAttacks.length === 0) {\r\n      console.log('âš ï¸ allAttacksê°€ ë¹„ì–´ìˆìŒ');\r\n      return [];\r\n    }\r\n\r\n    const baseTime = startDate.getTime();\r\n    const rangeStartTime = baseTime + (timeRange[0] * 24 * 60 * 60 * 1000); // ë²”ìœ„ ì‹œì‘\r\n    const rangeEndTime = baseTime + (timeRange[1] * 24 * 60 * 60 * 1000); // ë²”ìœ„ ì¢…ë£Œ\r\n\r\n    console.log('ğŸ” í•„í„°ë§ ì •ë³´:', {\r\n      'ì „ì²´ ì‘ì „ ìˆ˜': allAttacks.length,\r\n      'ë²”ìœ„ ì‹œì‘ (ì¼)': timeRange[0],\r\n      'ë²”ìœ„ ì¢…ë£Œ (ì¼)': timeRange[1],\r\n      'ë²”ìœ„ ì‹œì‘ ì‹œê°„': new Date(rangeStartTime).toISOString(),\r\n      'ë²”ìœ„ ì¢…ë£Œ ì‹œê°„': new Date(rangeEndTime).toISOString(),\r\n      'ì²« ë²ˆì§¸ ì‘ì „ ì‹œê°„': allAttacks[0] ? new Date(allAttacks[0].timestamp).toISOString() : 'N/A',\r\n      'ë§ˆì§€ë§‰ ì‘ì „ ì‹œê°„': allAttacks[allAttacks.length - 1] ? new Date(allAttacks[allAttacks.length - 1].timestamp).toISOString() : 'N/A'\r\n    });\r\n\r\n    // ë²”ìœ„ ë‚´ì˜ ì‘ì „ë§Œ í‘œì‹œ\r\n    const filtered = allAttacks.filter(attack => {\r\n      const attackTime = new Date(attack.timestamp).getTime();\r\n      const isInRange = attackTime >= rangeStartTime && attackTime <= rangeEndTime;\r\n\r\n      // ì²˜ìŒ 3ê°œë§Œ ìƒ˜í”Œë¡œ ë¡œê·¸ ì¶œë ¥\r\n      if (allAttacks.indexOf(attack) < 3) {\r\n        console.log(`  ì‘ì „ ${attack.id}:`, {\r\n          ì‹œê°„: new Date(attackTime).toISOString(),\r\n          'ë²”ìœ„ ë‚´': isInRange,\r\n          'ì‹œì‘ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ìŒ': attackTime >= rangeStartTime,\r\n          'ì¢…ë£Œë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ìŒ': attackTime <= rangeEndTime\r\n        });\r\n      }\r\n\r\n      return isInRange;\r\n    });\r\n\r\n    console.log(`âœ… í•„í„°ë§ ê²°ê³¼: ${filtered.length}ê°œ ì‘ì „ (${timeRange[1] - timeRange[0]}ì¼ì¹˜)`);\r\n    return filtered;\r\n  }, [allAttacks, timeRange, startDate]);\r\n\r\n  // attacksë¥¼ filteredAttacksë¡œ ë™ê¸°í™”\r\n  useEffect(() => {\r\n    console.log('ğŸ”„ attacks ìƒíƒœ ì—…ë°ì´íŠ¸:', filteredAttacks.length, 'ê°œ');\r\n    setAttacks(filteredAttacks);\r\n  }, [filteredAttacks]);\r\n\r\n  // ê³µê²© ë°ì´í„° ì´ˆê¸°í™” ë° ì—…ë°ì´íŠ¸ (API í˜¸ì¶œ)\r\n  useEffect(() => {\r\n    const initializeAttacks = async () => {\r\n      console.log('ğŸ“… 7ì¼ê°„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (í•˜ë£¨ë‹¹ 20ê°œì”©):', {\r\n        ì‹œì‘: startDate.toISOString(),\r\n        ì¢…ë£Œ: endDate.toISOString()\r\n      });\r\n\r\n      // 7ì¼ê°„ ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ê°€ì ¸ì˜¤ê¸° (í•˜ë£¨ë‹¹ 20ê°œ)\r\n      const promises = [];\r\n      for (let day = 0; day < 7; day++) {\r\n        // UTC ì‹œê°„ëŒ€ë¡œ ë‚ ì§œ ìƒì„±\r\n        const dayStart = new Date(Date.UTC(2025, 8, 2 + day, 0, 0, 0, 0)); // 2025ë…„ 9ì›” 2ì¼ë¶€í„°\r\n        const dayEnd = new Date(Date.UTC(2025, 8, 2 + day, 23, 59, 59, 999));\r\n\r\n        console.log(`ğŸ“† ${day + 1}ì¼ì°¨ ë°ì´í„° ìš”ì²­ ì‹œì‘: ${dayStart.toISOString()}`);\r\n\r\n        promises.push(\r\n          fetchAndFormatAttackData(dayStart, dayEnd)\r\n            .then(dayData => {\r\n              console.log(`  âœ… ${day + 1}ì¼ì°¨ ì‘ë‹µ: ${dayData.length}ê°œ ì‘ì „`);\r\n\r\n              // IDë¥¼ ê³ ìœ í•˜ê²Œ ë§Œë“¤ê¸° (ë‚ ì§œ í¬í•¨)\r\n              const uniqueData = dayData.slice(0, 20).map((attack) => ({\r\n                ...attack,\r\n                id: `day${day}-${attack.id}` // ì˜ˆ: day0-attack-0, day1-attack-0\r\n              }));\r\n\r\n              return uniqueData;\r\n            })\r\n            .catch(error => {\r\n              console.error(`  âŒ ${day + 1}ì¼ì°¨ ì—ëŸ¬:`, error);\r\n              return [];\r\n            })\r\n        );\r\n      }\r\n\r\n      // ëª¨ë“  ìš”ì²­ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°\r\n      const allDayData = await Promise.all(promises);\r\n      const allData = allDayData.flat(); // 2ì°¨ì› ë°°ì—´ì„ 1ì°¨ì›ìœ¼ë¡œ í‰íƒ„í™”\r\n\r\n      console.log('ğŸ“Š ì¼ìë³„ ë°ì´í„° ê°œìˆ˜:', allDayData.map((data, i) => `${i+1}ì¼: ${data.length}ê°œ`).join(', '));\r\n\r\n      console.log(`âœ… ì´ ${allData.length}ê°œì˜ ì‘ì „ ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.`);\r\n\r\n      if (allData.length > 0) {\r\n        console.log('ğŸ“Š ì „ì²´ ë°ì´í„° ì‹œê°„ ë²”ìœ„:', {\r\n          ì²«ë²ˆì§¸: new Date(allData[0].timestamp).toISOString(),\r\n          ë§ˆì§€ë§‰: new Date(allData[allData.length - 1].timestamp).toISOString()\r\n        });\r\n        console.log('ğŸ“Š ì²« 3ê°œ ì‘ì „ ìƒ˜í”Œ:', allData.slice(0, 3).map(a => ({\r\n          id: a.id,\r\n          timestamp: new Date(a.timestamp).toISOString(),\r\n          source: a.source.name,\r\n          target: a.target.name\r\n        })));\r\n      } else {\r\n        console.error('âŒ ë°ì´í„°ê°€ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤!');\r\n      }\r\n\r\n      setAllAttacks(allData);\r\n      console.log('ğŸ’¾ allAttacks ìƒíƒœì— ì €ì¥ ì™„ë£Œ:', allData.length, 'ê°œ');\r\n\r\n      // ì´ˆê¸°ì—ëŠ” ì „ì²´ 7ì¼ í‘œì‹œ\r\n      setTimeRange([0, 7]);\r\n      console.log('ğŸ“… ì´ˆê¸° timeRange ì„¤ì •: [0, 7]');\r\n    };\r\n\r\n    initializeAttacks();\r\n  }, [startDate, endDate]);\r\n\r\n  useEffect(() => {\r\n    if (!cesiumContainer.current) return;\r\n\r\n    const initializeCesium = async () => {\r\n      try {\r\n        console.log('Cesium 2D ëª¨ë“œ ì´ˆê¸°í™” ì‹œì‘...');\r\n        console.log('Access Token:', Cesium.Ion.defaultAccessToken ? 'ì„¤ì •ë¨' : 'ì—†ìŒ');\r\n\r\n        // Cesium Viewer ìƒì„± - 2D ëª¨ë“œë§Œ ì§€ì›\r\n        viewer.current = new Cesium.Viewer(cesiumContainer.current, {\r\n          // UI ìš”ì†Œë“¤ ì •ë¦¬\r\n          animation: false,\r\n          baseLayerPicker: true,\r\n          fullscreenButton: false,\r\n          geocoder: true,\r\n          homeButton: true,\r\n          infoBox: true,\r\n          sceneModePicker: false,\r\n          scene3DOnly: false, // 2D ëª¨ë“œ ì§€ì›\r\n          selectionIndicator: true,\r\n          timeline: false,\r\n          navigationHelpButton: false,\r\n          navigationInstructionsInitiallyVisible: false,\r\n\r\n          // ê³ í’ˆì§ˆ ì§€í˜• ë°ì´í„° ì‚¬ìš©\r\n          terrainProvider: await Cesium.createWorldTerrainAsync({\r\n            requestWaterMask: true,\r\n            requestVertexNormals: true\r\n          }),\r\n\r\n          // ì—°ì† ë Œë”ë§ ê°•ì œ í™œì„±í™”\r\n          requestRenderMode: false,\r\n          maximumRenderTimeChange: Infinity\r\n        });\r\n\r\n        console.log('Cesium Viewer ìƒì„± ì™„ë£Œ');\r\n\r\n        // ì¦‰ì‹œ 2D ëª¨ë“œë¡œ ì „í™˜\r\n        viewer.current.scene.morphTo2D(0);\r\n        console.log('2D ëª¨ë“œë¡œ ê°•ì œ ì „í™˜');\r\n\r\n        // ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë ˆì´ì–´ ì¶”ê°€\r\n        try {\r\n          const bingProvider = await Cesium.createWorldImageryAsync({\r\n            style: Cesium.IonWorldImageryStyle.AERIAL_WITH_LABELS\r\n          });\r\n          viewer.current.imageryLayers.addImageryProvider(bingProvider);\r\n          console.log('ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë ˆì´ì–´ ì¶”ê°€ ì™„ë£Œ');\r\n        } catch (error) {\r\n          console.log('ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë ˆì´ì–´ ì¶”ê°€ ì‹¤íŒ¨:', error);\r\n        }\r\n\r\n        // ì§€êµ¬ë³¸ ê³ ê¸‰ ì„¤ì •\r\n        const scene = viewer.current.scene;\r\n        const globe = scene.globe;\r\n\r\n        // ì‹¤ì œì ì¸ ì¡°ëª… ë° ëŒ€ê¸° íš¨ê³¼\r\n        scene.skyAtmosphere.show = true;\r\n        scene.fog.enabled = true;\r\n        scene.fog.density = 0.0001;\r\n        scene.fog.screenSpaceErrorFactor = 2.0;\r\n\r\n        // ê³ í’ˆì§ˆ ì§€êµ¬ë³¸ ë Œë”ë§\r\n        globe.enableLighting = true;\r\n        globe.dynamicAtmosphereLighting = true;\r\n        globe.atmosphereLightIntensity = 10.0;\r\n        globe.showWaterEffect = true;\r\n\r\n        // ì§€í˜• ìƒì„¸ë„ ìµœëŒ€í™”\r\n        globe.maximumScreenSpaceError = 1.0;\r\n        globe.tileCacheSize = 1000;\r\n\r\n        // 2D ëª¨ë“œ ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ ì„¤ì •\r\n        scene.screenSpaceCameraController.enableRotate = false;\r\n        scene.screenSpaceCameraController.enableTranslate = true;\r\n        scene.screenSpaceCameraController.enableZoom = true;\r\n        scene.screenSpaceCameraController.enableTilt = false;\r\n        scene.screenSpaceCameraController.enableLook = false;\r\n        scene.screenSpaceCameraController.enableInputs = true;\r\n\r\n        // 2D ëª¨ë“œ í™•ëŒ€ ë²”ìœ„ ìµœì í™” - ì „ì²´ ì§€ë„ë¥¼ ë³¼ ìˆ˜ ìˆë„ë¡\r\n        scene.screenSpaceCameraController.minimumZoomDistance = 100;\r\n        scene.screenSpaceCameraController.maximumZoomDistance = 40000000;  // 40,000km - ì „ì²´ ì§€êµ¬ ë³´ê¸°\r\n\r\n        // 2D ëª¨ë“œì—ì„œ ì•ˆì „í•œ íŒ¨ë‹ ì„¤ì •\r\n        scene.screenSpaceCameraController.translateEventTypes = [\r\n          Cesium.CameraEventType.LEFT_DRAG,\r\n          Cesium.CameraEventType.RIGHT_DRAG\r\n        ];\r\n\r\n        // 2D ëª¨ë“œì—ì„œ ì¤Œ ì†ë„ ì¡°ì •\r\n        scene.screenSpaceCameraController.zoomEventTypes = [\r\n          Cesium.CameraEventType.WHEEL,\r\n          Cesium.CameraEventType.PINCH\r\n        ];\r\n\r\n        // ìì—°ìŠ¤ëŸ¬ìš´ ì¤Œ ì†ë„ ìµœì í™”\r\n        scene.screenSpaceCameraController.zoomFactor = 5.0;\r\n        scene.screenSpaceCameraController.wheelZoomFactor = 10.0;  // ì •ìƒì ì¸ ì¤Œ ì†ë„\r\n\r\n        // ê´€ì„± ì„¤ì • ìµœì í™” (ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„)\r\n        scene.screenSpaceCameraController.inertiaSpin = 0.95;\r\n        scene.screenSpaceCameraController.inertiaTranslate = 0.95;\r\n        scene.screenSpaceCameraController.inertiaZoom = 0.9;\r\n\r\n        // ì¹´ë©”ë¼ ì´ë™ í›„ ì§€ë„ ì¤‘ì•™ ìœ„ì¹˜ë¡œ ë³µê·€í•˜ëŠ” ë¦¬ìŠ¤ë„ˆ ì¶”ê°€\r\n        scene.camera.moveEnd.addEventListener(() => {\r\n          const cameraHeight = scene.camera.positionCartographic.height;\r\n\r\n          // ìµœëŒ€ ì¶•ì†Œ ìƒíƒœì¼ ë•Œë§Œ (38,000km ì´ìƒ) ì§€ë„ë¥¼ í™”ë©´ ì¤‘ì•™ì— ì •ë ¬\r\n          if (cameraHeight >= 38000000) {\r\n            const currentCenter = scene.camera.positionCartographic;\r\n            const mapCenterLon = 125.7625;  // ê²½ë„ 126ë„ (ë¶í•œ ê°€ë¡œ ìœ„ì¹˜) - ì¢Œìš° ë°¸ëŸ°ìŠ¤\r\n            const mapCenterLat = 0.0;       // ìœ„ë„ 0ë„ (ì ë„) - ìƒí•˜ ë°¸ëŸ°ìŠ¤\r\n\r\n            // í˜„ì¬ ìœ„ì¹˜ê°€ ì§€ë„ ì¤‘ì‹¬ì—ì„œ ë§ì´ ë²—ì–´ë‚¬ì„ ê²½ìš°ë§Œ ë¶€ë“œëŸ½ê²Œ ì¤‘ì•™ìœ¼ë¡œ ì´ë™\r\n            const lonDiff = Math.abs(Cesium.Math.toDegrees(currentCenter.longitude) - mapCenterLon);\r\n            const latDiff = Math.abs(Cesium.Math.toDegrees(currentCenter.latitude) - mapCenterLat);\r\n\r\n            // 30ë„ ì´ìƒ ë²—ì–´ë‚¬ì„ ë•Œë§Œ ë³µê·€\r\n            if (lonDiff > 30 || latDiff > 30) {\r\n              scene.camera.flyTo({\r\n                destination: Cesium.Cartesian3.fromDegrees(mapCenterLon, mapCenterLat, cameraHeight),\r\n                orientation: {\r\n                  heading: 0.0,\r\n                  pitch: -Cesium.Math.PI_OVER_TWO,\r\n                  roll: 0.0\r\n                },\r\n                duration: 1.0\r\n              });\r\n            }\r\n          }\r\n        });\r\n\r\n        // ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš© ë° ì •ë³´ í‘œì‹œ í™œì„±í™”\r\n        viewer.current.cesiumWidget.creditContainer.style.display = \"none\";\r\n\r\n        // ì§€í˜• í´ë¦­ ì‹œ ì¢Œí‘œ ì •ë³´ í‘œì‹œ\r\n        viewer.current.screenSpaceEventHandler.setInputAction((event) => {\r\n          const cartesian = viewer.current.camera.pickEllipsoid(event.position, scene.globe.ellipsoid);\r\n          if (cartesian) {\r\n            const cartographic = Cesium.Cartographic.fromCartesian(cartesian);\r\n            const longitude = Cesium.Math.toDegrees(cartographic.longitude);\r\n            const latitude = Cesium.Math.toDegrees(cartographic.latitude);\r\n            const height = cartographic.height;\r\n\r\n            console.log(`ìœ„ì¹˜: ìœ„ë„ ${latitude.toFixed(6)}, ê²½ë„ ${longitude.toFixed(6)}, ê³ ë„ ${height.toFixed(2)}m`);\r\n          }\r\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n\r\n        // ì´ˆê¸° ì¹´ë©”ë¼ ìœ„ì¹˜ - ë¶í•œ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì • (2D ëª¨ë“œ)\r\n        // 2D ëª¨ë“œì—ì„œëŠ” ì •í™•í•œ ì¤‘ì•™ ì •ë ¬ì´ í•„ìš”\r\n        const northKoreaView = {\r\n          destination: Cesium.Cartesian3.fromDegrees(125.7625, 39.0392, 5000000),\r\n          orientation: {\r\n            heading: 0.0,\r\n            pitch: -Cesium.Math.PI_OVER_TWO,  // ì •í™•íˆ ìœ„ì—ì„œ ì•„ë˜ë¥¼ ë°”ë¼ë´„\r\n            roll: 0.0\r\n          }\r\n        };\r\n\r\n        // 2D ëª¨ë“œ ì „í™˜ ì™„ë£Œ í›„ ì¹´ë©”ë¼ ì„¤ì •\r\n        setTimeout(() => {\r\n          viewer.current.camera.setView(northKoreaView);\r\n        }, 500);\r\n\r\n        // í™ˆ ë²„íŠ¼ì´ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œë§Œ ì´ë²¤íŠ¸ ë“±ë¡\r\n        if (viewer.current.homeButton) {\r\n          viewer.current.homeButton.viewModel.command.beforeExecute.addEventListener((e) => {\r\n            e.cancel = true;\r\n            viewer.current.camera.setView(northKoreaView);\r\n          });\r\n        }\r\n\r\n        // ê³ í’ˆì§ˆ ë Œë”ë§ ì„¤ì •\r\n        if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n          viewer.current.resolutionScale = window.devicePixelRatio;\r\n        }\r\n\r\n        // ì¥ë©´ ì„¤ì •\r\n        scene.postProcessStages.fxaa.enabled = true;\r\n\r\n        // ì• ë‹ˆë©”ì´ì…˜ ì‹œê³„ ì„¤ì •\r\n        viewer.current.clock.shouldAnimate = true;\r\n        viewer.current.clock.multiplier = 1.0;\r\n        viewer.current.clock.currentTime = Cesium.JulianDate.now();\r\n\r\n        // ê°•ì œ ì—°ì† ë Œë”ë§\r\n        scene.requestRenderMode = false;\r\n        scene.maximumRenderTimeChange = Infinity;\r\n\r\n        // requestAnimationFrame ID ì €ì¥ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)\r\n        let animationFrameId = null;\r\n        const forceRender = () => {\r\n          if (viewer.current && !viewer.current.isDestroyed()) {\r\n            scene.requestRender();\r\n            animationFrameId = requestAnimationFrame(forceRender);\r\n          }\r\n        };\r\n        forceRender();\r\n\r\n        // ì‹œê³„ë¥¼ í•­ìƒ ì‹¤í–‰ ìƒíƒœë¡œ ìœ ì§€ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ - interval ID ì €ì¥)\r\n        const clockIntervalId = setInterval(() => {\r\n          if (viewer.current && !viewer.current.isDestroyed()) {\r\n            viewer.current.clock.tick();\r\n          }\r\n        }, 16);\r\n\r\n        // cleanup í•¨ìˆ˜ë“¤ì„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì €ì¥\r\n        viewer.current._cleanupIds = {\r\n          animationFrameId,\r\n          clockIntervalId\r\n        };\r\n\r\n        setIsLoaded(true);\r\n\r\n      } catch (error) {\r\n        console.error('Cesium ì´ˆê¸°í™” ì˜¤ë¥˜:', error);\r\n        setError(`Cesium ì´ˆê¸°í™” ì‹¤íŒ¨: ${error.message}`);\r\n      }\r\n    };\r\n\r\n    initializeCesium();\r\n\r\n    // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)\r\n    return () => {\r\n      if (viewer.current) {\r\n        // intervalê³¼ animationFrame ì •ë¦¬\r\n        if (viewer.current._cleanupIds) {\r\n          if (viewer.current._cleanupIds.animationFrameId) {\r\n            cancelAnimationFrame(viewer.current._cleanupIds.animationFrameId);\r\n          }\r\n          if (viewer.current._cleanupIds.clockIntervalId) {\r\n            clearInterval(viewer.current._cleanupIds.clockIntervalId);\r\n          }\r\n        }\r\n\r\n        viewer.current.destroy();\r\n        viewer.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ ê´€ë¦¬\r\n  const [animationEntities, setAnimationEntities] = useState([]);\r\n  const [selectedAttackId, setSelectedAttackId] = useState(null);\r\n  const [selectedBuildingAttacks, setSelectedBuildingAttacks] = useState([]);\r\n  const [highlightedBuildings, setHighlightedBuildings] = useState([]);\r\n  const [markerHighlights, setMarkerHighlights] = useState([]);\r\n\r\n  // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ë¥¼ ê°•ì œë¡œ ì œê±°í•˜ëŠ” í•¨ìˆ˜\r\n  const clearAllHighlights = useCallback(() => {\r\n    if (!viewer.current) return;\r\n\r\n    // ëª¨ë“  ì—”í‹°í‹°ë¥¼ ìˆœíšŒí•˜ë©° í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n    const entities = viewer.current.entities.values;\r\n    for (let i = 0; i < entities.length; i++) {\r\n      const entity = entities[i];\r\n      if (entity && entity.id) {\r\n        const entityId = entity.id;\r\n        // source ë˜ëŠ” target ë§ˆì»¤ì¸ ê²½ìš°ì—ë§Œ ìƒ‰ìƒ ë³µì›\r\n        if (entityId.startsWith('source-2d-') || entityId.startsWith('target-2d-')) {\r\n          resetEntityColors(entity, entityId);\r\n        }\r\n      }\r\n    }\r\n\r\n    // ìƒíƒœ ì´ˆê¸°í™”\r\n    setHighlightedBuildings([]);\r\n    setMarkerHighlights([]);\r\n  }, []);\r\n\r\n  // ì§€ë„ì—ì„œ ê±´ë¬¼ í•˜ì´ë¼ì´íŠ¸ í•¨ìˆ˜ (ìµœì í™” ë²„ì „)\r\n  const highlightBuildingOnMap = useCallback((attackId) => {\r\n    if (!viewer.current || !attacks) return;\r\n\r\n    const attack = findAttackById(attacks, attackId);\r\n    if (!attack) return;\r\n\r\n    // ê¸°ì¡´ í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n    highlightedBuildings.forEach(entityId => {\r\n      const entity = viewer.current.entities.getById(entityId);\r\n      if (entity) {\r\n        resetEntityColors(entity, entityId);\r\n      }\r\n    });\r\n\r\n    // ìƒˆë¡œìš´ í•˜ì´ë¼ì´íŠ¸ ì ìš© (2D ëª¨ë“œìš© ID)\r\n    const targetPrefix = `target-2d-${attack.id}`;\r\n    const sourcePrefix = `source-2d-${attack.id}`;\r\n\r\n    const targetEntity = viewer.current.entities.getById(targetPrefix);\r\n    const sourceEntity = viewer.current.entities.getById(sourcePrefix);\r\n\r\n    const newHighlighted = [];\r\n\r\n    if (targetEntity) {\r\n      highlightEntity(targetEntity, false);\r\n      newHighlighted.push(targetPrefix);\r\n    }\r\n\r\n    if (sourceEntity) {\r\n      highlightEntity(sourceEntity, true);\r\n      newHighlighted.push(sourcePrefix);\r\n    }\r\n\r\n    setHighlightedBuildings(newHighlighted);\r\n  }, [attacks, highlightedBuildings]);\r\n\r\n  // ê±´ë¬¼ í´ë¦­ ì‹œ ê´€ë ¨ëœ ëª¨ë“  ê³µê²© í•˜ì´ë¼ì´íŠ¸ (ìµœì í™” ë²„ì „)\r\n  const highlightBuildingAttacks = useCallback((clickedAttack, entityId) => {\r\n    if (!viewer.current || !attacks) return;\r\n\r\n    // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ê°•ì œ ì œê±°\r\n    clearAllHighlights();\r\n\r\n    // í´ë¦­ëœ ê±´ë¬¼ì„ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” ëª¨ë“  ê³µê²© ì°¾ê¸°\r\n    const isTargetClick = entityId.includes('target');\r\n    const clickedBuildingName = isTargetClick\r\n      ? clickedAttack.target.building.name\r\n      : clickedAttack.source.building.name;\r\n\r\n    const relatedAttacks = isTargetClick\r\n      ? attacks.filter(attack => attack.target.building.name === clickedBuildingName)\r\n      : attacks.filter(attack => attack.source.building.name === clickedBuildingName);\r\n\r\n    if (relatedAttacks.length === 0) return;\r\n\r\n    // ê´€ë ¨ëœ ëª¨ë“  ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n    const newMarkerHighlights = [];\r\n\r\n    relatedAttacks.forEach(attack => {\r\n      const sourceEntityId = `source-2d-${attack.id}`;\r\n      const targetEntityId = `target-2d-${attack.id}`;\r\n\r\n      const sourceEntity = viewer.current.entities.getById(sourceEntityId);\r\n      const targetEntity = viewer.current.entities.getById(targetEntityId);\r\n\r\n      if (sourceEntity) {\r\n        highlightEntity(sourceEntity, true);\r\n        newMarkerHighlights.push(sourceEntityId);\r\n      }\r\n\r\n      if (targetEntity) {\r\n        highlightEntity(targetEntity, false);\r\n        newMarkerHighlights.push(targetEntityId);\r\n      }\r\n    });\r\n\r\n    setMarkerHighlights(newMarkerHighlights);\r\n\r\n    // ê´€ë ¨ëœ ëª¨ë“  ë¡œê·¸ í•˜ì´ë¼ì´íŠ¸\r\n    const relatedAttackIds = relatedAttacks.map(attack => attack.id);\r\n    setSelectedBuildingAttacks(relatedAttackIds);\r\n    setSelectedAttackId(null);\r\n\r\n    // ì²« ë²ˆì§¸ ê´€ë ¨ ë¡œê·¸ë¡œ ìŠ¤í¬ë¡¤\r\n    if (relatedAttacks.length > 0) {\r\n      scrollToLog(relatedAttacks[0].id);\r\n    }\r\n  }, [attacks, clearAllHighlights]);\r\n\r\n  // IP ê¸°ë°˜ ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸ í•¨ìˆ˜ (ìµœì í™” ë²„ì „)\r\n  const highlightMarkerAndLogs = useCallback((clickedAttack, entityId) => {\r\n    if (!viewer.current || !attacks) return;\r\n\r\n    // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ê°•ì œ ì œê±°\r\n    clearAllHighlights();\r\n\r\n    // í´ë¦­ëœ ë§ˆì»¤ê°€ sourceì¸ì§€ targetì¸ì§€ í™•ì¸\r\n    const isSource = entityId.includes('source');\r\n    const clickedIP = isSource ? clickedAttack.source.ip : clickedAttack.target.ip;\r\n\r\n    // í•´ë‹¹ IPì™€ ê´€ë ¨ëœ ëª¨ë“  ê³µê²© ì°¾ê¸°\r\n    const relatedAttacks = attacks.filter(attack =>\r\n      attack.source.ip === clickedIP || attack.target.ip === clickedIP\r\n    );\r\n\r\n    if (relatedAttacks.length > 0) {\r\n      // ëª¨ë“  ê´€ë ¨ëœ ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n      const newMarkerHighlights = [];\r\n\r\n      relatedAttacks.forEach(attack => {\r\n        const sourceEntityId = `source-2d-${attack.id}`;\r\n        const targetEntityId = `target-2d-${attack.id}`;\r\n\r\n        const sourceEntity = viewer.current.entities.getById(sourceEntityId);\r\n        const targetEntity = viewer.current.entities.getById(targetEntityId);\r\n\r\n        // Source ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n        if (sourceEntity && attack.source.ip === clickedIP) {\r\n          highlightEntity(sourceEntity, true);\r\n          newMarkerHighlights.push(sourceEntityId);\r\n        }\r\n\r\n        // Target ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n        if (targetEntity && attack.target.ip === clickedIP) {\r\n          highlightEntity(targetEntity, false);\r\n          newMarkerHighlights.push(targetEntityId);\r\n        }\r\n      });\r\n\r\n      setMarkerHighlights(newMarkerHighlights);\r\n\r\n      // ê´€ë ¨ëœ ë¡œê·¸ë“¤ í•˜ì´ë¼ì´íŠ¸\r\n      const relatedAttackIds = relatedAttacks.map(attack => attack.id);\r\n      setSelectedBuildingAttacks(relatedAttackIds);\r\n      setSelectedAttackId(null);\r\n\r\n      // ì²« ë²ˆì§¸ ê´€ë ¨ ë¡œê·¸ë¡œ ìŠ¤í¬ë¡¤\r\n      if (relatedAttacks.length > 0) {\r\n        scrollToLog(relatedAttacks[0].id);\r\n      }\r\n    }\r\n  }, [attacks, clearAllHighlights]);\r\n\r\n  // 2D ëª¨ë“œìš© ì—”í‹°í‹° ìƒì„± í•¨ìˆ˜\r\n  const create2DEntities = (attacks) => {\r\n    if (!viewer.current || !attacks || attacks.length === 0) {\r\n      console.warn('âš ï¸ create2DEntities: viewer ë˜ëŠ” attacksê°€ ì—†ìŒ', {\r\n        viewer: !!viewer.current,\r\n        attacksCount: attacks?.length || 0\r\n      });\r\n      return;\r\n    }\r\n\r\n    console.log(`ğŸ¨ create2DEntities ì‹œì‘: ${attacks.length}ê°œ ì‘ì „ ì‹œê°í™”`);\r\n    let successCount = 0;\r\n    let failCount = 0;\r\n\r\n    try {\r\n      attacks.forEach((attack, index) => {\r\n        // ì¢Œí‘œ ìœ íš¨ì„± ê²€ì¦\r\n        const sourceLon = parseFloat(attack.source.building.lon);\r\n        const sourceLat = parseFloat(attack.source.building.lat);\r\n        const targetLon = parseFloat(attack.target.building.lon);\r\n        const targetLat = parseFloat(attack.target.building.lat);\r\n\r\n        if (isNaN(sourceLon) || isNaN(sourceLat) || isNaN(targetLon) || isNaN(targetLat)) {\r\n          console.warn('2D ëª¨ë“œ: ì˜ëª»ëœ ì¢Œí‘œ ë°ì´í„°', {\r\n            id: attack.id,\r\n            source: attack.source.name,\r\n            target: attack.target.name\r\n          });\r\n          failCount++;\r\n          return;\r\n        }\r\n\r\n        // ì²˜ìŒ 5ê°œëŠ” ìƒì„¸ ë¡œê·¸ ì¶œë ¥\r\n        if (index < 5) {\r\n          console.log(`  ì‘ì „ ${index + 1}:`, {\r\n            id: attack.id,\r\n            source: `${attack.source.name} (${sourceLat.toFixed(2)}, ${sourceLon.toFixed(2)})`,\r\n            target: `${attack.target.name} (${targetLat.toFixed(2)}, ${targetLon.toFixed(2)})`,\r\n            protocol: attack.type\r\n          });\r\n        }\r\n\r\n        // 2D ëª¨ë“œì—ì„œëŠ” ë†’ì´ë¥¼ 0ìœ¼ë¡œ ì„¤ì •\r\n        const markerHeight = 0;\r\n        const sourceMarkerPos = Cesium.Cartesian3.fromDegrees(sourceLon, sourceLat, markerHeight);\r\n        const targetMarkerPos = Cesium.Cartesian3.fromDegrees(targetLon, targetLat, markerHeight);\r\n\r\n        // 2D ì†ŒìŠ¤ ë§ˆì»¤ (ê³µê²© ì¶œë°œì§€)\r\n        viewer.current.entities.add({\r\n          id: `source-2d-${attack.id}`,\r\n          position: sourceMarkerPos,\r\n          point: {\r\n            pixelSize: MARKER_SIZES.NORMAL,\r\n            color: COLORS.SOURCE.NORMAL,\r\n            outlineColor: COLORS.SOURCE.OUTLINE,\r\n            outlineWidth: MARKER_SIZES.OUTLINE_WIDTH_NORMAL,\r\n            heightReference: Cesium.HeightReference.NONE,\r\n            disableDepthTestDistance: Number.POSITIVE_INFINITY,\r\n            show: true\r\n          },\r\n          buildingData: {\r\n            name: attack.source.building.name,\r\n            country: attack.source.name,\r\n            type: 'source'\r\n          }\r\n        });\r\n\r\n        // 2D íƒ€ê²Ÿ ë§ˆì»¤ (ê³µê²© ë°›ëŠ” ê³³)\r\n        viewer.current.entities.add({\r\n          id: `target-2d-${attack.id}`,\r\n          position: targetMarkerPos,\r\n          point: {\r\n            pixelSize: MARKER_SIZES.NORMAL,\r\n            color: COLORS.TARGET.NORMAL,\r\n            outlineColor: COLORS.TARGET.OUTLINE,\r\n            outlineWidth: MARKER_SIZES.OUTLINE_WIDTH_NORMAL,\r\n            heightReference: Cesium.HeightReference.NONE,\r\n            disableDepthTestDistance: Number.POSITIVE_INFINITY,\r\n            show: true\r\n          },\r\n          buildingData: {\r\n            name: attack.target.building.name,\r\n            country: attack.target.name,\r\n            type: 'target'\r\n          }\r\n        });\r\n\r\n        // 2D ì§ì„  ê´‘ì„ \r\n        viewer.current.entities.add({\r\n          id: `beam-2d-${attack.id}`,\r\n          polyline: {\r\n            positions: [sourceMarkerPos, targetMarkerPos],\r\n            width: 6,\r\n            material: new Cesium.PolylineGlowMaterialProperty({\r\n              glowPower: 0.05,\r\n              color: new Cesium.CallbackProperty((time) => {\r\n                const seconds = Cesium.JulianDate.secondsDifference(time, viewer.current.clock.startTime) % 2;\r\n                const alpha = 0.15 + 0.05 * Math.sin(seconds * Math.PI);\r\n                return Cesium.Color.RED.withAlpha(alpha);\r\n              }, false)\r\n            }),\r\n            clampToGround: false,\r\n            followSurface: false,\r\n            granularity: Cesium.Math.RADIANS_PER_DEGREE\r\n          },\r\n          description: `ğŸ”´ ì‚¬ì´ë²„ ì‘ì „: ${attack.source.name} â†’ ${attack.target.name}`,\r\n          attackData: attack\r\n        });\r\n\r\n        successCount++;\r\n      });\r\n\r\n      console.log(`âœ… create2DEntities ì™„ë£Œ: ì„±ê³µ ${successCount}ê°œ, ì‹¤íŒ¨ ${failCount}ê°œ`);\r\n      console.log(`ğŸ“Š ìƒì„±ëœ ì—”í‹°í‹°: ë§ˆì»¤ ${successCount * 2}ê°œ, ê´‘ì„  ${successCount}ê°œ`);\r\n    } catch (error) {\r\n      console.error('âŒ 2D ì—”í‹°í‹° ìƒì„± ì˜¤ë¥˜:', error);\r\n    }\r\n  };\r\n\r\n  // ê³µê²© ì‹œê°í™” íš¨ê³¼\r\n  useEffect(() => {\r\n    if (!viewer.current || !isLoaded || !attacks || attacks.length === 0) return;\r\n\r\n    try {\r\n      // ê¸°ì¡´ ì—”í‹°í‹° ì œê±°\r\n      viewer.current.entities.removeAll();\r\n\r\n      // ê¸°ì¡´ ì• ë‹ˆë©”ì´ì…˜ ì •ë¦¬\r\n      animationEntities.forEach(entity => {\r\n        if (entity.interval) clearInterval(entity.interval);\r\n      });\r\n      setAnimationEntities([]);\r\n\r\n      // 2D ì—”í‹°í‹° ìƒì„±\r\n      create2DEntities(attacks);\r\n    } catch (error) {\r\n      console.error('ì—”í‹°í‹° ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\r\n    }\r\n\r\n    // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\r\n    if (viewer.current.screenSpaceEventHandler) {\r\n      viewer.current.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n      viewer.current.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\r\n    }\r\n\r\n    // ì‹±ê¸€ í´ë¦­ ì´ë²¤íŠ¸\r\n    viewer.current.screenSpaceEventHandler.setInputAction((click) => {\r\n      try {\r\n        const pickedObject = viewer.current.scene.pick(click.position);\r\n\r\n        if (pickedObject && pickedObject.id) {\r\n          // ID ì°¾ê¸°\r\n          let entityId = null;\r\n          if (pickedObject.id.id) {\r\n            entityId = pickedObject.id.id;\r\n          } else if (pickedObject.id._id) {\r\n            entityId = pickedObject.id._id;\r\n          } else if (typeof pickedObject.id === 'string') {\r\n            entityId = pickedObject.id;\r\n          }\r\n\r\n          // ë¨¼ì € ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n          clearAllHighlights();\r\n\r\n          // ê±´ë¬¼ í´ë¦­ ì²˜ë¦¬\r\n          const isSourceBuilding = entityId && entityId.startsWith('source-2d-');\r\n          const isTargetBuilding = entityId && entityId.startsWith('target-2d-');\r\n\r\n          if (isSourceBuilding || isTargetBuilding) {\r\n            // IDì—ì„œ attack ID ì¶”ì¶œ\r\n            let attackId = null;\r\n            if (entityId.startsWith('source-2d-')) {\r\n              attackId = entityId.replace('source-2d-', '');\r\n            } else if (entityId.startsWith('target-2d-')) {\r\n              attackId = entityId.replace('target-2d-', '');\r\n            }\r\n\r\n            if (attackId) {\r\n              // ê³µê²© ì°¾ê¸° (íƒ€ì… ì•ˆì •ì„± ê°œì„ ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš©)\r\n              const clickedAttack = findAttackById(attacks, attackId);\r\n\r\n              if (clickedAttack) {\r\n                // ìƒˆë¡œìš´ ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n                highlightBuildingAttacks(clickedAttack, entityId);\r\n                return;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // ë¹ˆ ê³µê°„ í´ë¦­ ì‹œ ì„ íƒ í•´ì œ\r\n        setSelectedAttackId(null);\r\n        setSelectedBuildingAttacks([]);\r\n\r\n        // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n        clearAllHighlights();\r\n      } catch (error) {\r\n        console.error('í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜¤ë¥˜:', error);\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n\r\n    // ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸ - ë§ˆì»¤ë¡œ í™•ëŒ€\r\n    viewer.current.screenSpaceEventHandler.setInputAction((click) => {\r\n      try {\r\n        const pickedObject = viewer.current.scene.pick(click.position);\r\n\r\n        if (pickedObject && pickedObject.id) {\r\n          // ID ì°¾ê¸°\r\n          let entityId = null;\r\n          if (pickedObject.id.id) {\r\n            entityId = pickedObject.id.id;\r\n          } else if (pickedObject.id._id) {\r\n            entityId = pickedObject.id._id;\r\n          } else if (typeof pickedObject.id === 'string') {\r\n            entityId = pickedObject.id;\r\n          }\r\n\r\n          // ë§ˆì»¤ì¸ì§€ í™•ì¸\r\n          const isSourceMarker = entityId && entityId.startsWith('source-2d-');\r\n          const isTargetMarker = entityId && entityId.startsWith('target-2d-');\r\n\r\n          if (isSourceMarker || isTargetMarker) {\r\n            const entity = viewer.current.entities.getById(entityId);\r\n            if (entity && entity.position) {\r\n              const position = entity.position.getValue(viewer.current.clock.currentTime);\r\n              if (position) {\r\n                const cartographic = Cesium.Cartographic.fromCartesian(position);\r\n                const longitude = Cesium.Math.toDegrees(cartographic.longitude);\r\n                const latitude = Cesium.Math.toDegrees(cartographic.latitude);\r\n\r\n                // 2D ëª¨ë“œì—ì„œ ì ì ˆí•œ ì¤Œ ë ˆë²¨ë¡œ ì´ë™\r\n                viewer.current.camera.flyTo({\r\n                  destination: Cesium.Cartesian3.fromDegrees(longitude, latitude, 50000), // 50km ê³ ë„\r\n                  duration: 1.5,\r\n                  complete: () => {\r\n                    // ì¹´ë©”ë¼ ì´ë™ ì™„ë£Œ í›„ ì»¨íŠ¸ë¡¤ ì¬í™œì„±í™”\r\n                    viewer.current.scene.screenSpaceCameraController.enableInputs = true;\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('ë”ë¸”í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜¤ë¥˜:', error);\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\r\n  }, [attacks, isLoaded]);\r\n\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        sx={{\r\n          width: '100%',\r\n          height: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          bgcolor: '#f5f5f5',\r\n          borderRadius: 2,\r\n          p: 2\r\n        }}\r\n      >\r\n        <Typography color=\"error\" sx={{ mb: 2, textAlign: 'center' }}>\r\n          {error}\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ textAlign: 'center', color: 'text.secondary' }}>\r\n          1. https://cesium.com/ion/ ë°©ë¬¸<br/>\r\n          2. ë¬´ë£Œ ê³„ì • ìƒì„±<br/>\r\n          3. Access Token ë°œê¸‰<br/>\r\n          4. EarthGlobe.jsx íŒŒì¼ì˜ í† í° êµì²´\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card \r\n      component=\"main\"\r\n      role=\"main\"\r\n      aria-label=\"2D ì§€ë„ ê¸°ë°˜ ì‚¬ì´ë²„ ê³µê²© ì‹œê°í™”\"\r\n      sx={{\r\n        width: '100%',\r\n        height: 'calc(100vh - 120px)',\r\n        bgcolor: 'background.paper',\r\n        boxShadow: 3,\r\n        m: 0\r\n      }}\r\n    >\r\n      <CardContent sx={{\r\n        p: 1,\r\n        height: '100%',\r\n        '&:last-child': { pb: 1 },\r\n        display: 'flex',\r\n        flexDirection: { xs: 'column', lg: 'row' },\r\n        gap: 1,\r\n        overflow: 'hidden'\r\n      }}>\r\n        {/* ì§€êµ¬ë³¸ ì˜ì—­ */}\r\n        <Card \r\n          component=\"section\"\r\n          aria-label=\"2D ì§€ë„ ì˜ì—­\"\r\n          sx={{\r\n            flex: 1,\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            height: '100%',\r\n            bgcolor: '#000',\r\n            border: '1px solid #333',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.3)'\r\n          }}\r\n        >\r\n          <CardContent sx={{ p: 0, height: '100%', '&:last-child': { pb: 0 }, position: 'relative' }}>\r\n            {/* MultilayerVisualization ì´ë™ ë²„íŠ¼ */}\r\n            <IconButton\r\n              size=\"small\"\r\n              aria-label=\"3D ë©€í‹°ë ˆì´ì–´ë¡œ ì´ë™\"\r\n              title=\"3D ë©€í‹°ë ˆì´ì–´ë¡œ ì´ë™\"\r\n              onClick={() => navigate('/CyberObjectInfo/MultilayerVisualization')}\r\n              sx={{\r\n                position: 'absolute',\r\n                top: 6.5,\r\n                right: 125,\r\n                zIndex: 1000,\r\n                bgcolor: '#222b33',\r\n                color: '#fff',\r\n                borderRadius: '5%',\r\n                width: 32,\r\n                height: 32,\r\n                boxShadow: '0 2px 8px #222b33',\r\n                '&:hover': {\r\n                  bgcolor: '#5b89b1ff',\r\n                  color: '#fff',\r\n                },\r\n              }}\r\n            >\r\n              <FundOutlined style={{ fontSize: 18 }} />\r\n            </IconButton>\r\n            <div\r\n              ref={cesiumContainer}\r\n              role=\"img\"\r\n              aria-label=\"ì‚¬ì´ë²„ ê³µê²© ê²½ë¡œë¥¼ í‘œì‹œí•˜ëŠ” 2D ì§€ë„\"\r\n              style={{\r\n                width: '100%',\r\n                height: '100%'\r\n              }}\r\n            />\r\n            {!isLoaded && (\r\n              <Box\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n                aria-label=\"ì§€ë„ ë¡œë”© ì¤‘\"\r\n                sx={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  bgcolor: 'rgba(0,0,0,0.8)',\r\n                  color: 'white'\r\n                }}\r\n              >\r\n                <Typography>2D ëª¨ë“œ ë¡œë”© ì¤‘...</Typography>\r\n              </Box>\r\n            )}\r\n\r\n            {/* í’ˆì§ˆ í‘œì‹œ */}\r\n            {isLoaded && (\r\n              <Box sx={{\r\n                position: 'absolute',\r\n                top: 8,\r\n                left: 8,\r\n                background: 'rgba(0,0,0,0.7)',\r\n                color: 'white',\r\n                padding: '4px 8px',\r\n                borderRadius: 1,\r\n                fontSize: 10\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"inherit\">\r\n                  ğŸ—ºï¸ Osint ì •ë³´ ìˆ˜ì§‘\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n\r\n            {/* FusionDB íŒì—… ë²„íŠ¼ */}\r\n            {isLoaded && (\r\n              <IconButton\r\n                size=\"small\"\r\n                aria-label=\"ìœµí•© ë°ì´í„°ë² ì´ìŠ¤ ì—´ê¸°\"\r\n                title=\"ìœµí•© ë°ì´í„°ë² ì´ìŠ¤ ì—´ê¸°\"\r\n                onClick={() => openPopup('fusionDB')}\r\n                sx={{\r\n                  position: 'absolute',\r\n                  bottom: '1%',\r\n                  left: '98%',\r\n                  transform: 'translateX(-50%)',\r\n                  zIndex: 1000,\r\n                  bgcolor: '#222b33',\r\n                  color: '#fff',\r\n                  borderRadius: '5%',\r\n                  width: 48,\r\n                  height: 48,\r\n                  boxShadow: '0 4px 12px #222b33',\r\n                  '&:hover': {\r\n                    bgcolor: '#5b89b1ff',\r\n                    color: '#fff',\r\n                    transform: 'translateX(-50%) scale(1.1)',\r\n                  },\r\n                  transition: 'all 0.3s ease'\r\n                }}\r\n              >\r\n                <DatabaseOutlined style={{ fontSize: 24 }} />\r\n              </IconButton>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* ê³µê²© í˜„í™© íŒ¨ë„ */}\r\n        <Box \r\n          component=\"aside\"\r\n          aria-label=\"ê³µê²© í˜„í™© íŒ¨ë„\"\r\n          sx={{\r\n            width: { xs: '100%', lg: 350 },\r\n            maxWidth: { xs: '100%', lg: 400 },\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: 2,\r\n            height: '100%',\r\n            overflow: 'hidden'\r\n          }}\r\n        >\r\n          {/* ì‹¤ì‹œê°„ í†µê³„ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ì‹¤ì‹œê°„ ê³µê²© í†µê³„\"\r\n            sx={{\r\n              bgcolor: '#f0edfd',\r\n              color: '#333',\r\n              border: '1px solid #d0c9f0',\r\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n              minHeight: 0,\r\n              flexShrink: 0\r\n            }}\r\n          >\r\n            <CardContent>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <Box sx={{ textAlign: 'center' }}>\r\n                    <Typography \r\n                      variant=\"h4\" \r\n                      sx={{ color: '#7c3aed', fontWeight: 'bold' }}\r\n                      aria-label={`ì´ ì‘ì „ ìˆ˜ ${attackStats.total}ê°œ`}\r\n                    >\r\n                      {attackStats.total}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{ color: '#666' }}>\r\n                      ì´ ì‘ì „ ìˆ˜\r\n                    </Typography>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Box sx={{ textAlign: 'center' }}>\r\n                    <Typography \r\n                      variant=\"h4\" \r\n                      sx={{ color: '#9333ea', fontWeight: 'bold' }}\r\n                      aria-label={`í™œì„± ì‘ì „ ${attackStats.active}ê°œ`}\r\n                    >\r\n                      {attackStats.active}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{ color: '#666' }}>\r\n                      í™œì„± ì‘ì „\r\n                    </Typography>\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* ìµœê·¼ ê³µê²© ëª©ë¡ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ìµœê·¼ ê³µê²© ëª©ë¡\"\r\n            sx={{\r\n              bgcolor: 'transparent',\r\n              color: '#333',\r\n              flex: 1,\r\n              minHeight: 0,\r\n              border: 'none',\r\n              boxShadow: 'none',\r\n              display: 'flex',\r\n              flexDirection: 'column'\r\n            }}\r\n          >\r\n            <CardContent sx={{\r\n              height: '100%',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              flex: 1,\r\n              '&:last-child': { pb: 2 }\r\n            }}>\r\n              <Box\r\n                ref={logListRef}\r\n                role=\"list\"\r\n                aria-label=\"ê³µê²© ë¡œê·¸ ëª©ë¡\"\r\n                sx={{\r\n                  flex: 1,\r\n                  overflow: 'auto',\r\n                  minHeight: 0\r\n                }}\r\n              >\r\n              {attacks && attacks.map((attack, index) => (\r\n                <Box\r\n                  id={`log-${attack.id}`}\r\n                  key={attack.id}\r\n                  data-attack-id={attack.id}\r\n                  role=\"listitem\"\r\n                  tabIndex={0}\r\n                  aria-label={`ê³µê²© ì •ë³´: ${attack.type}, ${attack.source.name}ì—ì„œ ${attack.target.name}ë¡œ, ì¶œë°œì§€ IP ${attack.source.ip}`}\r\n                  aria-selected={selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)}\r\n                  sx={{\r\n                    p: 1,\r\n                    mb: 1,\r\n                    bgcolor: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? 'rgba(124,58,237,0.2)' : 'rgba(124,58,237,0.05)',\r\n                    borderRadius: 1,\r\n                    borderLeft: '3px solid #7c3aed',\r\n                    border: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? '2px solid #7c3aed' : 'none',\r\n                    boxShadow: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? '0 0 10px rgba(124,58,237,0.4)' : 'none',\r\n                    animation: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? 'pulse 1.5s infinite' : 'none',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.3s ease',\r\n                    position: 'relative'\r\n                  }}\r\n                  onClick={() => {\r\n                    const newSelectedId = selectedAttackId === attack.id ? null : attack.id;\r\n                    setSelectedAttackId(newSelectedId);\r\n                    setSelectedBuildingAttacks([]);\r\n\r\n                    // ë¡œê·¸ í´ë¦­ ì‹œ ì§€ë„ì—ì„œ í•´ë‹¹ ê±´ë¬¼ í•˜ì´ë¼ì´íŠ¸ ë° ì´ë™\r\n                    if (newSelectedId) {\r\n                      clearAllHighlights();\r\n                      highlightBuildingOnMap(attack.id);\r\n                    } else {\r\n                      // ì„ íƒ í•´ì œ ì‹œ ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n                      clearAllHighlights();\r\n                    }\r\n                  }}\r\n                >\r\n                  <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#333' }}>\r\n                    ğŸ”´ {attack.type} - ì§„í–‰ì¤‘\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>\r\n                    {attack.source.name} â†’ {attack.target.name}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    ì¶œë°œì§€ IP: {attack.source.ip}:{attack.source.port}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    ëŒ€ìƒ IP: {attack.target.ip}:{attack.target.port}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    Subnet: {attack.target.subnet} | Gateway: {attack.target.gateway}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    DNS: {attack.target.dns} | Count: {attack.count}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    {attack.timestamp.toLocaleString('ko-KR', {\r\n                      timeZone: 'Asia/Seoul',\r\n                      year: 'numeric',\r\n                      month: '2-digit',\r\n                      day: '2-digit',\r\n                      hour: '2-digit',\r\n                      minute: '2-digit',\r\n                      second: '2-digit'\r\n                    })}\r\n                  </Typography>\r\n\r\n                  {/* ë‚´ë¶€ë§ ì´ë™ ì•„ì´ì½˜ */}\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    aria-label=\"ë‚´ë¶€ë§ í† í´ë¡œì§€ë¡œ ì´ë™\"\r\n                    title=\"ë‚´ë¶€ë§ í† í´ë¡œì§€ë¡œ ì´ë™\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      navigate('/ExtInt/internaltopology');\r\n                    }}\r\n                    sx={{\r\n                      position: 'absolute',\r\n                      top: 4,\r\n                      right: 4,\r\n                      color: '#7c3aed',\r\n                      bgcolor: 'rgba(124,58,237,0.1)',\r\n                      border: '1px solid rgba(124,58,237,0.3)',\r\n                      '&:hover': {\r\n                        bgcolor: 'rgba(124,58,237,0.2)',\r\n                        color: '#9333ea'\r\n                      },\r\n                      width: 24,\r\n                      height: 24\r\n                    }}\r\n                  >\r\n                    <FundOutlined style={{ fontSize: 12 }} />\r\n                  </IconButton>\r\n                </Box>\r\n              ))}\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* ì‹œê°„ í•„í„°ë§ ì»¨íŠ¸ë¡¤ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ë‚ ì§œ ë²”ìœ„ í•„í„°ë§ ì»¨íŠ¸ë¡¤\"\r\n            sx={{\r\n              bgcolor: '#f0edfd',\r\n              color: '#333',\r\n              border: '1px solid #d0c9f0',\r\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n              flexShrink: 0,\r\n              minHeight: 0\r\n            }}\r\n          >\r\n            <CardContent>\r\n              <Typography \r\n                variant=\"body2\" \r\n                component=\"h3\"\r\n                sx={{ mb: 1, fontWeight: 'bold', color: '#7c3aed' }}\r\n              >\r\n                ë‚ ì§œ ë²”ìœ„ í•„í„°ë§\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ display: 'block', mb: 1, color: '#666' }}>\r\n                {(() => {\r\n                  const startDay = new Date(startDate);\r\n                  startDay.setDate(startDay.getDate() + timeRange[0]);\r\n                  const endDay = new Date(startDate);\r\n                  endDay.setDate(endDay.getDate() + timeRange[1] - 1);\r\n                  return `${startDay.toLocaleDateString('ko-KR')} ~ ${endDay.toLocaleDateString('ko-KR')} (${timeRange[1] - timeRange[0]}ì¼)`;\r\n                })()}\r\n              </Typography>\r\n              <Slider\r\n                aria-label=\"ë‚ ì§œ ë²”ìœ„ ì„ íƒ\"\r\n                value={timeRange}\r\n                onChange={(_, newValue) => setTimeRange(newValue)}\r\n                min={0}\r\n                max={7}\r\n                step={1}\r\n                marks={[\r\n                  { value: 0, label: '9/2' },\r\n                  { value: 1, label: '9/3' },\r\n                  { value: 2, label: '9/4' },\r\n                  { value: 3, label: '9/5' },\r\n                  { value: 4, label: '9/6' },\r\n                  { value: 5, label: '9/7' },\r\n                  { value: 6, label: '9/8' },\r\n                  { value: 7, label: '9/9' }\r\n                ]}\r\n                valueLabelDisplay=\"auto\"\r\n                valueLabelFormat={(value) => {\r\n                  const day = new Date(startDate);\r\n                  day.setDate(day.getDate() + value);\r\n                  return day.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' });\r\n                }}\r\n                sx={{\r\n                  color: '#7c3aed',\r\n                  '& .MuiSlider-thumb': {\r\n                    backgroundColor: '#7c3aed',\r\n                    '&:hover, &.Mui-focusVisible': {\r\n                      boxShadow: '0 0 0 8px rgba(124,58,237, 0.16)',\r\n                    },\r\n                  },\r\n                  '& .MuiSlider-track': {\r\n                    backgroundColor: '#7c3aed',\r\n                  },\r\n                  '& .MuiSlider-rail': {\r\n                    backgroundColor: '#d0c9f0',\r\n                  },\r\n                  '& .MuiSlider-mark': {\r\n                    backgroundColor: '#b8aee0',\r\n                  },\r\n                  '& .MuiSlider-markLabel': {\r\n                    color: '#666',\r\n                    fontSize: '9px',\r\n                  },\r\n                  '& .MuiSlider-valueLabel': {\r\n                    backgroundColor: '#7c3aed',\r\n                    color: '#fff',\r\n                  },\r\n                }}\r\n              />\r\n              <Typography variant=\"caption\" sx={{ display: 'block', mt: 1, color: '#888', fontSize: '10px' }}>\r\n                í‘œì‹œëœ ì‘ì „: {attacks.length}ê°œ / ì „ì²´: {allAttacks.length}ê°œ (í•˜ë£¨ë‹¹ ìµœëŒ€ 20ê°œ)\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* ë²”ë¡€ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ì§€ë„ ë²”ë¡€\"\r\n            sx={{\r\n              bgcolor: '#f0edfd',\r\n              color: '#333',\r\n              border: '1px solid #d0c9f0',\r\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n              flexShrink: 0,\r\n              minHeight: 0\r\n            }}\r\n          >\r\n            <CardContent>\r\n              <Box component=\"ul\" role=\"list\" sx={{ display: 'flex', flexDirection: 'column', gap: 1, listStyle: 'none', p: 0, m: 0 }}>\r\n                <Box component=\"li\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Box \r\n                    aria-hidden=\"true\"\r\n                    sx={{ width: 12, height: 12, borderRadius: '50%', bgcolor: '#FFFF00', border: '2px solid #FF0000' }} \r\n                  />\r\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>ê³µê²© ì¶œë°œì§€</Typography>\r\n                </Box>\r\n                <Box component=\"li\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Box \r\n                    aria-hidden=\"true\"\r\n                    sx={{ width: 12, height: 12, borderRadius: '50%', bgcolor: '#00FFFF', border: '2px solid #0000FF' }} \r\n                  />\r\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>ê³µê²© ëª©í‘œì§€</Typography>\r\n                </Box>\r\n                <Box component=\"li\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Box \r\n                    aria-hidden=\"true\"\r\n                    sx={{ width: 20, height: 2, bgcolor: '#FF0000', borderRadius: 1, boxShadow: '0 0 4px #FF0000' }} \r\n                  />\r\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>ğŸ”´ ì‚¬ì´ë²„ ì‘ì „</Typography>\r\n                </Box>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Box>\r\n      </CardContent>\r\n\r\n      {/* FusionDB íŒì—… ë‹¤ì´ì–¼ë¡œê·¸ */}\r\n      <Dialog\r\n        open={fusionDBOpen}\r\n        onClose={() => closePopup('fusionDB')}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n        PaperProps={{\r\n          sx: {\r\n            height: '70vh',\r\n            maxHeight: '70vh',\r\n            m: 0,\r\n            position: 'relative',\r\n            overflow: 'hidden'\r\n          }\r\n        }}\r\n      >\r\n        <IconButton\r\n          onClick={() => closePopup('fusionDB')}\r\n          sx={{\r\n            position: 'absolute',\r\n            right: 23,\r\n            top: 8.5,\r\n            color: '#000000ff',\r\n            zIndex: 1,\r\n            bgcolor: '#cac7d4ff',\r\n            '&:hover': {\r\n              bgcolor: '#39306b',\r\n              color: '#ffffffff'\r\n            }\r\n          }}\r\n        >\r\n          âœ•\r\n        </IconButton>\r\n        <DialogContent sx={{ p: 0, height: '100%', overflow: 'hidden' }}>\r\n          <FusionDBConsole open={fusionDBOpen} isPopup={true} />\r\n        </DialogContent>\r\n      </Dialog>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default TwoDPage;"],"names":["FusionDB","open","isPopup","jsx","ConsoleView","type","API_CONFIG","COLORS","SOURCE","NORMAL","Cesium.Color","YELLOW","OUTLINE","RED","HIGHLIGHT","ORANGE","TARGET","CYAN","BLUE","LIME","HIGHLIGHT_OUTLINE","WHITE","style","document","createElement","textContent","head","appendChild","Cesium.Ion","defaultAccessToken","generateAS","country","asNumbers","China","Russia","Iran","Japan","Germany","Burundi","default","asList","name","Math","floor","random","length","findAttackById","attacks","attackId","find","attack","id","toString","parseInt","resetEntityColors","entity","entityId","point","isSource","includes","color","outlineColor","outlineWidth","pixelSize","highlightEntity","disableDepthTestDistance","Number","POSITIVE_INFINITY","scrollToLog","el","getElementById","scrollIntoView","behavior","block","animation","setTimeout","fetchAndFormatAttackData","async","startDate","endDate","url","toISOString","response","fetch","ok","Error","status","data","json","success","map","source","building","city","lat","lon","ip","port","subnet","gateway","dns","as","target","protocol","severity","min","ceil","count","timestamp","Date","forEach","index","error","TwoDPage","navigate","useNavigate","cesiumContainer","useRef","viewer","logListRef","isLoaded","setIsLoaded","useState","setError","setAttacks","popups","openPopup","closePopup","usePopup","fusionDBOpen","fusionDB","useEffect","allAttacks","setAllAttacks","timeRange","setTimeRange","attackStats","useMemo","total","active","blocked","countries","Set","a","size","filteredAttacks","baseTime","getTime","rangeStartTime","rangeEndTime","filter","attackTime","isInRange","indexOf","promises","day","dayStart","UTC","dayEnd","push","then","dayData","slice","catch","allData","Promise","all","flat","initializeAttacks","current","Cesium.Viewer","baseLayerPicker","fullscreenButton","geocoder","homeButton","infoBox","sceneModePicker","scene3DOnly","selectionIndicator","timeline","navigationHelpButton","navigationInstructionsInitiallyVisible","terrainProvider","Cesium.createWorldTerrainAsync","requestWaterMask","requestVertexNormals","requestRenderMode","maximumRenderTimeChange","Infinity","scene","morphTo2D","bingProvider","Cesium.createWorldImageryAsync","Cesium.IonWorldImageryStyle","AERIAL_WITH_LABELS","imageryLayers","addImageryProvider","globe","skyAtmosphere","show","fog","enabled","density","screenSpaceErrorFactor","enableLighting","dynamicAtmosphereLighting","atmosphereLightIntensity","showWaterEffect","maximumScreenSpaceError","tileCacheSize","screenSpaceCameraController","enableRotate","enableTranslate","enableZoom","enableTilt","enableLook","enableInputs","minimumZoomDistance","maximumZoomDistance","translateEventTypes","Cesium.CameraEventType","LEFT_DRAG","RIGHT_DRAG","zoomEventTypes","WHEEL","PINCH","zoomFactor","wheelZoomFactor","inertiaSpin","inertiaTranslate","inertiaZoom","camera","moveEnd","addEventListener","cameraHeight","positionCartographic","height","currentCenter","mapCenterLon","mapCenterLat","lonDiff","abs","Cesium.Math","toDegrees","longitude","latDiff","latitude","flyTo","destination","Cesium.Cartesian3","fromDegrees","orientation","heading","pitch","PI_OVER_TWO","roll","duration","cesiumWidget","creditContainer","display","screenSpaceEventHandler","setInputAction","event","cartesian","pickEllipsoid","position","ellipsoid","cartographic","Cesium.Cartographic","fromCartesian","Cesium.ScreenSpaceEventType","LEFT_CLICK","northKoreaView","setView","viewModel","command","beforeExecute","e","cancel","Cesium.FeatureDetection","supportsImageRenderingPixelated","resolutionScale","window","devicePixelRatio","postProcessStages","fxaa","clock","shouldAnimate","multiplier","currentTime","Cesium.JulianDate","now","animationFrameId","forceRender","isDestroyed","requestRender","requestAnimationFrame","clockIntervalId","setInterval","tick","_cleanupIds","message","initializeCesium","cancelAnimationFrame","clearInterval","destroy","animationEntities","setAnimationEntities","selectedAttackId","setSelectedAttackId","selectedBuildingAttacks","setSelectedBuildingAttacks","highlightedBuildings","setHighlightedBuildings","markerHighlights","setMarkerHighlights","clearAllHighlights","useCallback","entities","values","i","startsWith","highlightBuildingOnMap","getById","targetPrefix","sourcePrefix","targetEntity","sourceEntity","newHighlighted","highlightBuildingAttacks","clickedAttack","isTargetClick","clickedBuildingName","relatedAttacks","newMarkerHighlights","sourceEntityId","targetEntityId","relatedAttackIds","clickedIP","removeAll","interval","sourceLon","parseFloat","sourceLat","targetLon","targetLat","isNaN","sourceMarkerPos","targetMarkerPos","add","heightReference","Cesium.HeightReference","NONE","buildingData","polyline","positions","width","material","Cesium.PolylineGlowMaterialProperty","glowPower","Cesium.CallbackProperty","time","seconds","secondsDifference","startTime","alpha","sin","PI","withAlpha","clampToGround","followSurface","granularity","RADIANS_PER_DEGREE","description","attackData","create2DEntities","removeInputAction","LEFT_DOUBLE_CLICK","click","pickedObject","pick","_id","isSourceBuilding","isTargetBuilding","replace","isSourceMarker","isTargetMarker","getValue","complete","jsxs","Box","sx","flexDirection","alignItems","justifyContent","bgcolor","borderRadius","p","children","Typography","mb","textAlign","variant","Card","component","role","boxShadow","m","CardContent","pb","xs","lg","gap","overflow","flex","border","IconButton","title","onClick","top","right","zIndex","FundOutlined","fontSize","ref","left","background","padding","bottom","transform","transition","DatabaseOutlined","maxWidth","minHeight","flexShrink","Grid","container","spacing","item","fontWeight","tabIndex","borderLeft","cursor","newSelectedId","toLocaleString","timeZone","year","month","hour","minute","second","stopPropagation","startDay","setDate","getDate","endDay","toLocaleDateString","Slider","value","onChange","_","newValue","max","step","marks","label","valueLabelDisplay","valueLabelFormat","backgroundColor","mt","listStyle","Dialog","onClose","fullWidth","PaperProps","maxHeight","DialogContent","FusionDBConsole"],"mappings":"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"}