{"version":3,"file":"TrendChart-DkkSRRZ7.js","sources":["../../../miraedojeon/front/src/pages/IntelligentCyberTargets/target/TrendChart.jsx"],"sourcesContent":["import React, { useMemo } from \"react\";\r\nimport { BarChart, Bar, LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\r\n\r\nfunction normalizeScores(data) {\r\n  // degree_score + con_score 계산\r\n  const scores = data.map(d => d.degree_score + d.con_score);\r\n  const min = Math.min(...scores);\r\n  const max = Math.max(...scores);\r\n  // 0~1 정규화\r\n  return scores.map(s => (max === min ? 0 : (s - min) / (max - min)));\r\n}\r\n\r\nfunction getHistogram(normalizedScores) {\r\n  // 0.1 단위 구간별 집계\r\n  const bins = Array(10).fill(0);\r\n  normalizedScores.forEach(s => {\r\n    const idx = Math.min(9, Math.floor(s * 10));\r\n    bins[idx]++;\r\n  });\r\n  return bins.map((count, i) => ({ range: `${(i/10).toFixed(1)}-${((i+1)/10).toFixed(1)}`, count }));\r\n}\r\n\r\nconst TrendChart = React.memo(({ data }) => {\r\n  // Memoize calculations\r\n  const { histogram, lineData } = useMemo(() => {\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      return { histogram: [], lineData: [] };\r\n    }\r\n    \r\n    const normalizedScores = normalizeScores(data);\r\n    const histogram = getHistogram(normalizedScores);\r\n    \r\n    // 분포 곡선용 데이터\r\n    const lineData = normalizedScores\r\n      .map((score, idx) => ({ idx, score }))\r\n      .sort((a, b) => a.score - b.score);\r\n\r\n    return { histogram, lineData };\r\n  }, [data]);\r\n\r\n  return (\r\n    <div style={{ \r\n      width: '100%', \r\n      height: '100%', \r\n      display: 'flex', \r\n      flexDirection: 'row',\r\n      alignItems: 'center', \r\n      justifyContent: 'center',\r\n      gap: '16px',\r\n      padding: '8px'\r\n    }}>\r\n      {/* 바 차트 */}\r\n      <div style={{ flex: 1, height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <BarChart data={histogram} margin={{ top: 10, right: 10, left: -5, bottom: 5 }}>\r\n            <XAxis \r\n              dataKey=\"range\" \r\n              tick={{ fontSize: 11 }}\r\n              interval={1}\r\n            />\r\n            <YAxis \r\n              allowDecimals={false}\r\n              tick={{ fontSize: 11 }}\r\n            />\r\n            <Tooltip />\r\n            <Legend wrapperStyle={{ fontSize: '11px' }} iconSize={8} />\r\n            <Bar dataKey=\"count\" fill=\"#8884d8\" name=\"점수 별 표적 개수\" />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* 라인 차트 */}\r\n      <div style={{ flex: 1, height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <LineChart data={lineData} margin={{ top: 10, right: 10, left: -5, bottom: 5 }}>\r\n            <XAxis \r\n              dataKey=\"idx\" \r\n              hide={true} \r\n            />\r\n            <YAxis \r\n              domain={[0, 1]}\r\n              tick={{ fontSize: 11 }}\r\n            />\r\n            <Tooltip />\r\n            <Legend wrapperStyle={{ fontSize: '11px' }} iconSize={8} />\r\n            <Line type=\"monotone\" dataKey=\"score\" stroke=\"#82ca9d\" dot={false} name=\"표적 정규화 점수\" />\r\n          </LineChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nTrendChart.displayName = 'TrendChart';\r\n\r\nexport default TrendChart;\r\n"],"names":["TrendChart","React","memo","data","histogram","lineData","useMemo","Array","isArray","length","normalizedScores","scores","map","d","degree_score","con_score","min","Math","max","s","normalizeScores","bins","fill","forEach","idx","floor","count","i","range","toFixed","getHistogram","score","sort","a","b","jsxs","style","width","height","display","flexDirection","alignItems","justifyContent","gap","padding","children","jsx","flex","ResponsiveContainer","BarChart","margin","top","right","left","bottom","XAxis","dataKey","tick","fontSize","interval","YAxis","allowDecimals","Tooltip","Legend","wrapperStyle","iconSize","Bar","name","LineChart","hide","domain","Line","type","stroke","dot","displayName"],"mappings":"qMAsBA,MAAMA,EAAaC,EAAMC,KAAK,EAAGC,WAE/B,MAAMC,UAAEA,EAAAC,SAAWA,GAAaC,EAAAA,QAAQ,KACtC,IAAKC,MAAMC,QAAQL,IAAyB,IAAhBA,EAAKM,OAC/B,MAAO,CAAEL,UAAW,GAAIC,SAAU,IAGpC,MAAMK,EA1BV,SAAyBP,GAEvB,MAAMQ,EAASR,EAAKS,OAASC,EAAEC,aAAeD,EAAEE,WAC1CC,EAAMC,KAAKD,OAAOL,GAClBO,EAAMD,KAAKC,OAAOP,GAExB,OAAOA,EAAOC,IAAIO,GAAMD,IAAQF,EAAM,GAAKG,EAAIH,IAAQE,EAAMF,GAC/D,CAmB6BI,CAAgBjB,GACnCC,EAlBV,SAAsBM,GAEpB,MAAMW,EAAOd,MAAM,IAAIe,KAAK,GAK5B,OAJAZ,EAAiBa,QAAQJ,IACvB,MAAMK,EAAMP,KAAKD,IAAI,EAAGC,KAAKQ,MAAU,GAAJN,IACnCE,EAAKG,OAEAH,EAAKT,IAAI,CAACc,EAAOC,MAASC,MAAO,IAAID,EAAE,IAAIE,QAAQ,QAAQF,EAAE,GAAG,IAAIE,QAAQ,KAAMH,UAC3F,CAUsBI,CAAapB,GAO/B,MAAO,CAAEN,UAAAA,EAAWC,SAJHK,EACdE,IAAI,CAACmB,EAAOP,KAAA,CAAWA,MAAKO,WAC5BC,KAAK,CAACC,EAAGC,IAAMD,EAAEF,MAAQG,EAAEH,SAG7B,CAAC5B,IAEJ,OACEgC,EAAAA,KAAC,OAAIC,MAAO,CACVC,MAAO,OACPC,OAAQ,OACRC,QAAS,OACTC,cAAe,MACfC,WAAY,SACZC,eAAgB,SAChBC,IAAK,OACLC,QAAS,OAGTC,SAAA,CAAAC,MAAC,MAAA,CAAIV,MAAO,CAAEW,KAAM,EAAGT,OAAQ,OAAQC,QAAS,OAAQE,WAAY,SAAUC,eAAgB,UAC5FG,eAACG,EAAA,CAAoBX,MAAM,OAAOC,OAAO,OACvCO,SAAAV,EAAAA,KAACc,EAAA,CAAS9C,KAAMC,EAAW8C,OAAQ,CAAEC,IAAK,GAAIC,MAAO,GAAIC,MAAM,EAAIC,OAAQ,GACzET,SAAA,CAAAC,EAAAA,IAACS,EAAA,CACCC,QAAQ,QACRC,KAAM,CAAEC,SAAU,IAClBC,SAAU,IAEZb,EAAAA,IAACc,EAAA,CACCC,eAAe,EACfJ,KAAM,CAAEC,SAAU,YAEnBI,EAAA,IACDhB,MAACiB,GAAOC,aAAc,CAAEN,SAAU,QAAUO,SAAU,UACrDC,EAAA,CAAIV,QAAQ,QAAQlC,KAAK,UAAU6C,KAAK,sBAM/CrB,MAAC,MAAA,CAAIV,MAAO,CAAEW,KAAM,EAAGT,OAAQ,OAAQC,QAAS,OAAQE,WAAY,SAAUC,eAAgB,UAC5FG,SAAAC,EAAAA,IAACE,EAAA,CAAoBX,MAAM,OAAOC,OAAO,OACvCO,SAAAV,EAAAA,KAACiC,EAAA,CAAUjE,KAAME,EAAU6C,OAAQ,CAAEC,IAAK,GAAIC,MAAO,GAAIC,MAAM,EAAIC,OAAQ,GACzET,SAAA,CAAAC,EAAAA,IAACS,EAAA,CACCC,QAAQ,MACRa,MAAM,IAERvB,EAAAA,IAACc,EAAA,CACCU,OAAQ,CAAC,EAAG,GACZb,KAAM,CAAEC,SAAU,YAEnBI,EAAA,IACDhB,MAACiB,GAAOC,aAAc,CAAEN,SAAU,QAAUO,SAAU,IACtDnB,EAAAA,IAACyB,EAAA,CAAKC,KAAK,WAAWhB,QAAQ,QAAQiB,OAAO,UAAUC,KAAK,EAAOP,KAAK,0BAQpFnE,EAAW2E,YAAc"}