{"version":3,"file":"TimeSeriesVisualization-COdP7Ujg.js","sources":["../../../miraedojeon/front/src/pages/ExtInt/TimeSeriesVisualization.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useMemo, useCallback, memo } from 'react';\r\nimport * as Cesium from 'cesium';\r\nimport { Box, Typography, Card, CardContent, Grid, IconButton, Slider, Button } from '@mui/material';\r\nimport { ClusterOutlined, GlobalOutlined } from '@ant-design/icons';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// ==================== ìƒìˆ˜ ì •ì˜ ====================\r\nconst API_CONFIG = {\r\n  BASE_URL: 'http://localhost:5000',\r\n  ENDPOINTS: {\r\n    NORTH_KOREA_ATTACKS: '/api/north-korea-attacks'\r\n  },\r\n  DEFAULT_LIMIT: 20  // í•˜ë£¨ë‹¹ 20ê°œë¡œ ì œí•œ\r\n};\r\n\r\nconst COLORS = {\r\n  SOURCE: {\r\n    NORMAL: Cesium.Color.YELLOW,\r\n    OUTLINE: Cesium.Color.RED,\r\n    HIGHLIGHT: Cesium.Color.ORANGE\r\n  },\r\n  TARGET: {\r\n    NORMAL: Cesium.Color.CYAN,\r\n    OUTLINE: Cesium.Color.BLUE,\r\n    HIGHLIGHT: Cesium.Color.LIME\r\n  },\r\n  HIGHLIGHT_OUTLINE: Cesium.Color.WHITE\r\n};\r\n\r\nconst MARKER_SIZES = {\r\n  NORMAL: 6,\r\n  HIGHLIGHT: 10,\r\n  OUTLINE_WIDTH_NORMAL: 2,\r\n  OUTLINE_WIDTH_HIGHLIGHT: 4\r\n};\r\n\r\nconst ANIMATION_TIMINGS = {\r\n  SCROLL_DURATION: 1300,\r\n  PULSE_DURATION: 1200\r\n};\r\n\r\nconst MARKER_HEIGHT_3D = 5000; // 3D ë§ˆì»¤ ë†’ì´\r\n\r\n// CSS ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€\r\nconst style = document.createElement('style');\r\nstyle.textContent = `\r\n  @keyframes pulse {\r\n    0% { box-shadow: 0 0 10px rgba(124,58,237,0.4); }\r\n    50% { box-shadow: 0 0 20px rgba(124,58,237,0.6); }\r\n    100% { box-shadow: 0 0 10px rgba(124,58,237,0.4); }\r\n  }\r\n`;\r\ndocument.head.appendChild(style);\r\n\r\n// Cesium Ion Access Token ì„¤ì •\r\nCesium.Ion.defaultAccessToken = import.meta.env.VITE_CESIUM_ION_ACCESS_TOKEN || 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzODNiZmZiNC04YTUxLTQ1YzgtOWU1Mi1kNDUyY2I2ZDRkNTQiLCJpZCI6MzQyNDEzLCJpYXQiOjE3NTgxNzMyNDh9.zZRyMPovg5ALhNtG2_E-0ED0qHqd_uQQnAG84eQUyG4';\r\n\r\n// AS ì •ë³´ ìƒì„± í•¨ìˆ˜\r\nconst generateAS = (country) => {\r\n  const asNumbers = {\r\n    'ì¤‘êµ­': ['AS4134 CHINANET', 'AS4837 CHINA169', 'AS9808 CMNET', 'AS24400 ALIBABA'],\r\n    'China': ['AS4134 CHINANET', 'AS4837 CHINA169', 'AS9808 CMNET', 'AS24400 ALIBABA'],\r\n    'ëŸ¬ì‹œì•„': ['AS8359 MTS', 'AS12389 ROSTELECOM', 'AS31133 MF-MGSM', 'AS42610 NCNET'],\r\n    'Russia': ['AS8359 MTS', 'AS12389 ROSTELECOM', 'AS31133 MF-MGSM', 'AS42610 NCNET'],\r\n    'ë¶í•œ': ['AS131279 STAR-KP', 'AS9769 DPRK-AS', 'AS17762 KPTC-AS'],\r\n    'North Korea': ['AS131279 STAR-KP', 'AS9769 DPRK-AS', 'AS17762 KPTC-AS'],\r\n    'ì´ë€': ['AS44244 IRANCELL', 'AS6736 BARIN', 'AS197207 MCCI', 'AS58224 TCI'],\r\n    'Iran': ['AS44244 IRANCELL', 'AS6736 BARIN', 'AS197207 MCCI', 'AS58224 TCI'],\r\n    'ë¯¸êµ­': ['AS15169 GOOGLE', 'AS8075 MICROSOFT', 'AS16509 AMAZON', 'AS32934 FACEBOOK'],\r\n    'United States': ['AS15169 GOOGLE', 'AS8075 MICROSOFT', 'AS16509 AMAZON', 'AS32934 FACEBOOK'],\r\n    'ì¼ë³¸': ['AS2516 KDDI', 'AS4713 NTT', 'AS2497 IIJ', 'AS7506 GMO'],\r\n    'Japan': ['AS2516 KDDI', 'AS4713 NTT', 'AS2497 IIJ', 'AS7506 GMO'],\r\n    'ë…ì¼': ['AS3320 DEUTSCHE', 'AS8881 1&1', 'AS20940 AKAMAI', 'AS24940 HETZNER'],\r\n    'Germany': ['AS3320 DEUTSCHE', 'AS8881 1&1', 'AS20940 AKAMAI', 'AS24940 HETZNER'],\r\n    'ì˜êµ­': ['AS2856 BT', 'AS5089 VIRGIN', 'AS12576 EE', 'AS13037 ZEN'],\r\n    'United Kingdom': ['AS2856 BT', 'AS5089 VIRGIN', 'AS12576 EE', 'AS13037 ZEN'],\r\n    'ëŒ€í•œë¯¼êµ­': ['AS9318 SKB', 'AS4766 KT', 'AS9644 LGU', 'AS17858 LG-DACOM'],\r\n    'South Korea': ['AS9318 SKB', 'AS4766 KT', 'AS9644 LGU', 'AS17858 LG-DACOM'],\r\n    'Burundi': ['AS37578 AS-KONNECT', 'AS37054 USAN', 'AS36945 ONATEL'],\r\n    'default': ['AS0 UNKNOWN']\r\n  };\r\n\r\n  const asList = asNumbers[country.name] || asNumbers['default'];\r\n  return asList[Math.floor(Math.random() * asList.length)];\r\n};\r\n\r\n// ==================== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ====================\r\n\r\n// Attack IDë¡œ ê³µê²© ì°¾ê¸° (íƒ€ì… ì•ˆì •ì„± ê°œì„ )\r\nconst findAttackById = (attacks, attackId) => {\r\n  if (!attacks || !attackId) return null;\r\n  return attacks.find(attack =>\r\n    attack.id === attackId ||\r\n    attack.id === attackId.toString() ||\r\n    attack.id === parseInt(attackId)\r\n  );\r\n};\r\n\r\n// ì—”í‹°í‹° ìƒ‰ìƒ ë³µì› (ì¤‘ë³µ ì½”ë“œ í†µí•©)\r\nconst resetEntityColors = (entity, entityId) => {\r\n  if (!entity || !entity.point) return;\r\n\r\n  const isSource = entityId.includes('source');\r\n  entity.point.color = isSource ? COLORS.SOURCE.NORMAL : COLORS.TARGET.NORMAL;\r\n  entity.point.outlineColor = isSource ? COLORS.SOURCE.OUTLINE : COLORS.TARGET.OUTLINE;\r\n  entity.point.outlineWidth = MARKER_SIZES.OUTLINE_WIDTH_NORMAL;\r\n  entity.point.pixelSize = MARKER_SIZES.NORMAL;\r\n};\r\n\r\n// ì—”í‹°í‹° í•˜ì´ë¼ì´íŠ¸ (ì¤‘ë³µ ì½”ë“œ í†µí•©)\r\nconst highlightEntity = (entity, isSource) => {\r\n  if (!entity || !entity.point) return;\r\n\r\n  entity.point.color = isSource ? COLORS.SOURCE.HIGHLIGHT : COLORS.TARGET.HIGHLIGHT;\r\n  entity.point.outlineColor = COLORS.HIGHLIGHT_OUTLINE;\r\n  entity.point.outlineWidth = MARKER_SIZES.OUTLINE_WIDTH_HIGHLIGHT;\r\n  entity.point.pixelSize = MARKER_SIZES.HIGHLIGHT;\r\n  entity.point.disableDepthTestDistance = Number.POSITIVE_INFINITY;\r\n};\r\n\r\n// ë¡œê·¸ë¡œ ìŠ¤í¬ë¡¤ (ì¤‘ë³µ ì½”ë“œ í†µí•©)\r\nconst scrollToLog = (attackId) => {\r\n  const el = document.getElementById(`log-${attackId}`);\r\n  if (el) {\r\n    el.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    el.style.animation = `pulse ${ANIMATION_TIMINGS.PULSE_DURATION / 1000}s ease-out 1`;\r\n    setTimeout(() => { el.style.animation = ''; }, ANIMATION_TIMINGS.SCROLL_DURATION);\r\n  }\r\n};\r\n\r\n// APIì—ì„œ ì‹¤ì œ MongoDB ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ í¬ë§·íŒ…í•˜ëŠ” í•¨ìˆ˜\r\nconst fetchAndFormatAttackData = async (startDate = null, endDate = null) => {\r\n  try {\r\n    let url = `${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.NORTH_KOREA_ATTACKS}?limit=${API_CONFIG.DEFAULT_LIMIT}`;\r\n\r\n    if (startDate) {\r\n      url += `&startDate=${startDate.toISOString()}`;\r\n    }\r\n    if (endDate) {\r\n      url += `&endDate=${endDate.toISOString()}`;\r\n    }\r\n\r\n    console.log('ğŸŒ API ìš”ì²­:', url);\r\n    const response = await fetch(url);\r\n    console.log('ğŸ“¡ API ì‘ë‹µ ìƒíƒœ:', response.status, response.statusText);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('ğŸ“¦ API ì‘ë‹µ ë°ì´í„°:', {\r\n      success: data.success,\r\n      count: data.count,\r\n      attacks: data.attacks?.length || 0\r\n    });\r\n\r\n    if (!data.success) {\r\n      console.error('API í˜¸ì¶œ ì‹¤íŒ¨:', data.error);\r\n      return [];\r\n    }\r\n\r\n    console.log(`âœ… ${data.count}ê°œì˜ ê³µê²© ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.`);\r\n    console.log('ğŸ“Š [3D] ì „ì²´ ì‘ì „ ë°ì´í„°:', data.attacks);\r\n\r\n    // API ë°ì´í„°ë¥¼ ê¸°ì¡´ í˜•ì‹ì— ë§ê²Œ ë³€í™˜\r\n    const attacks = data.attacks.map((attack) => {\r\n      return {\r\n        id: attack.id,\r\n        source: {\r\n          name: attack.source.name,\r\n          building: {\r\n            name: attack.source.city || attack.source.name,\r\n            lat: attack.source.lat,\r\n            lon: attack.source.lon\r\n          },\r\n          ip: attack.source.ip,\r\n          port: attack.source.port,\r\n          subnet: attack.source.subnet,\r\n          gateway: attack.source.gateway,\r\n          dns: attack.source.dns,\r\n          as: generateAS({ name: attack.source.name })\r\n        },\r\n        target: {\r\n          name: attack.target.name,\r\n          building: {\r\n            name: attack.target.city || 'North Korea',\r\n            lat: attack.target.lat,\r\n            lon: attack.target.lon\r\n          },\r\n          ip: attack.target.ip,\r\n          port: attack.target.port,\r\n          subnet: attack.target.subnet,\r\n          gateway: attack.target.gateway,\r\n          dns: attack.target.dns,\r\n          as: generateAS({ name: 'North Korea' })\r\n        },\r\n        type: attack.protocol,\r\n        severity: Math.min(5, Math.ceil(attack.count / 5)),\r\n        timestamp: new Date(attack.timestamp),\r\n        status: attack.status,\r\n        count: attack.count\r\n      };\r\n    });\r\n\r\n    // ë³€í™˜ëœ ì‘ì „ ë°ì´í„°ë¥¼ ëª¨ë‘ ë¡œê·¸ë¡œ ì¶œë ¥\r\n    console.log('ğŸ” [3D] ë³€í™˜ëœ ì‘ì „ ë°ì´í„° (ì „ì²´):', attacks);\r\n    attacks.forEach((attack, index) => {\r\n      console.log(`\\n[3D ì‘ì „ ${index + 1}/${attacks.length}]`, {\r\n        id: attack.id,\r\n        type: attack.type,\r\n        ì¶œë°œì§€: {\r\n          êµ­ê°€: attack.source.name,\r\n          ë„ì‹œ: attack.source.building.name,\r\n          IP: attack.source.ip,\r\n          Port: attack.source.port,\r\n          ì¢Œí‘œ: `${attack.source.building.lat}, ${attack.source.building.lon}`,\r\n          Subnet: attack.source.subnet,\r\n          Gateway: attack.source.gateway,\r\n          DNS: attack.source.dns,\r\n          AS: attack.source.as\r\n        },\r\n        ëª©í‘œì§€: {\r\n          êµ­ê°€: attack.target.name,\r\n          ë„ì‹œ: attack.target.building.name,\r\n          IP: attack.target.ip,\r\n          Port: attack.target.port,\r\n          ì¢Œí‘œ: `${attack.target.building.lat}, ${attack.target.building.lon}`,\r\n          Subnet: attack.target.subnet,\r\n          Gateway: attack.target.gateway,\r\n          DNS: attack.target.dns,\r\n          AS: attack.target.as\r\n        },\r\n        ì‹¬ê°ë„: attack.severity,\r\n        ì¹´ìš´íŠ¸: attack.count,\r\n        ìƒíƒœ: attack.status,\r\n        ì‹œê°„: attack.timestamp\r\n      });\r\n    });\r\n\r\n    console.log(`âœ… ${attacks.length}ê°œ ì‘ì „ ë³€í™˜ ì™„ë£Œ`);\r\n    return attacks;\r\n  } catch (error) {\r\n    console.error('âŒ API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜:', error);\r\n    console.error('âŒ ì—ëŸ¬ ìƒì„¸:', error.message, error.stack);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst EarthGlobe = () => {\r\n  const navigate = useNavigate();\r\n  const cesiumContainer = useRef(null);\r\n  const viewer = useRef(null);\r\n\r\n  const logListRef = useRef(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [attacks, setAttacks] = useState([]);\r\n\r\n  // ë‚ ì§œ ë° ì‹œê°„ í•„í„°ë§ ìƒíƒœ\r\n  const [allAttacks, setAllAttacks] = useState([]); // ì „ì²´ ë°ì´í„° ì €ì¥ (ì¼ì£¼ì¼, í•˜ë£¨ë‹¹ 20ê°œ = ì´ 140ê°œ)\r\n  const [timeRange, setTimeRange] = useState([0, 7]); // ì‹œê°„ ë²”ìœ„ (ì¼ ë‹¨ìœ„, 0ì¼~7ì¼)\r\n\r\n  // attackStatsë¥¼ useMemoë¡œ ìµœì í™” (attacksê°€ ë³€ê²½ë  ë•Œë§Œ ì¬ê³„ì‚°)\r\n  const attackStats = useMemo(() => {\r\n    if (!attacks || attacks.length === 0) {\r\n      return { total: 0, active: 0, blocked: 0, countries: 0 };\r\n    }\r\n\r\n    return {\r\n      total: attacks.length,\r\n      active: attacks.length,\r\n      blocked: 0,\r\n      countries: new Set([\r\n        ...attacks.map(a => a.source.name),\r\n        ...attacks.map(a => a.target.name)\r\n      ]).size\r\n    };\r\n  }, [attacks]);\r\n\r\n  // ì‹œì‘ ë‚ ì§œ ì„¤ì • (9/2 00:00:00)\r\n  const startDate = useMemo(() => {\r\n    const date = new Date('2025-09-02T00:00:00Z');\r\n    return date;\r\n  }, []);\r\n\r\n  // ì¢…ë£Œ ë‚ ì§œ ì„¤ì • (9/8 23:59:59 - 7ì¼ê°„)\r\n  const endDate = useMemo(() => {\r\n    const date = new Date('2025-09-08T23:59:59Z');\r\n    return date;\r\n  }, []);\r\n\r\n  // í˜„ì¬ ì‹œê°„ë°” ìœ„ì¹˜ì— ë”°ë¥¸ í•„í„°ë§ëœ ì‘ì „ ë°ì´í„°\r\n  const filteredAttacks = useMemo(() => {\r\n    console.log('ğŸ”„ filteredAttacks useMemo ì‹¤í–‰');\r\n    console.log('  - allAttacks ê¸¸ì´:', allAttacks ? allAttacks.length : 'null');\r\n    console.log('  - timeRange:', timeRange);\r\n\r\n    if (!allAttacks || allAttacks.length === 0) {\r\n      console.log('âš ï¸ allAttacksê°€ ë¹„ì–´ìˆìŒ');\r\n      return [];\r\n    }\r\n\r\n    const baseTime = startDate.getTime();\r\n    const rangeStartTime = baseTime + (timeRange[0] * 24 * 60 * 60 * 1000); // ë²”ìœ„ ì‹œì‘\r\n    const rangeEndTime = baseTime + (timeRange[1] * 24 * 60 * 60 * 1000); // ë²”ìœ„ ì¢…ë£Œ\r\n\r\n    console.log('ğŸ” í•„í„°ë§ ì •ë³´:', {\r\n      'ì „ì²´ ì‘ì „ ìˆ˜': allAttacks.length,\r\n      'ë²”ìœ„ ì‹œì‘ (ì¼)': timeRange[0],\r\n      'ë²”ìœ„ ì¢…ë£Œ (ì¼)': timeRange[1],\r\n      'ë²”ìœ„ ì‹œì‘ ì‹œê°„': new Date(rangeStartTime).toISOString(),\r\n      'ë²”ìœ„ ì¢…ë£Œ ì‹œê°„': new Date(rangeEndTime).toISOString(),\r\n      'ì²« ë²ˆì§¸ ì‘ì „ ì‹œê°„': allAttacks[0] ? new Date(allAttacks[0].timestamp).toISOString() : 'N/A',\r\n      'ë§ˆì§€ë§‰ ì‘ì „ ì‹œê°„': allAttacks[allAttacks.length - 1] ? new Date(allAttacks[allAttacks.length - 1].timestamp).toISOString() : 'N/A'\r\n    });\r\n\r\n    // ë²”ìœ„ ë‚´ì˜ ì‘ì „ë§Œ í‘œì‹œ\r\n    const filtered = allAttacks.filter(attack => {\r\n      const attackTime = new Date(attack.timestamp).getTime();\r\n      const isInRange = attackTime >= rangeStartTime && attackTime <= rangeEndTime;\r\n\r\n      // ì²˜ìŒ 3ê°œë§Œ ìƒ˜í”Œë¡œ ë¡œê·¸ ì¶œë ¥\r\n      if (allAttacks.indexOf(attack) < 3) {\r\n        console.log(`  ì‘ì „ ${attack.id}:`, {\r\n          ì‹œê°„: new Date(attackTime).toISOString(),\r\n          'ë²”ìœ„ ë‚´': isInRange,\r\n          'ì‹œì‘ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ìŒ': attackTime >= rangeStartTime,\r\n          'ì¢…ë£Œë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ìŒ': attackTime <= rangeEndTime\r\n        });\r\n      }\r\n\r\n      return isInRange;\r\n    });\r\n\r\n    console.log(`âœ… í•„í„°ë§ ê²°ê³¼: ${filtered.length}ê°œ ì‘ì „ (${timeRange[1] - timeRange[0]}ì¼ì¹˜)`);\r\n    return filtered;\r\n  }, [allAttacks, timeRange, startDate]);\r\n\r\n  // attacksë¥¼ filteredAttacksë¡œ ë™ê¸°í™”\r\n  useEffect(() => {\r\n    console.log('ğŸ”„ attacks ìƒíƒœ ì—…ë°ì´íŠ¸:', filteredAttacks.length, 'ê°œ');\r\n    setAttacks(filteredAttacks);\r\n  }, [filteredAttacks]);\r\n\r\n  // ê³µê²© ë°ì´í„° ì´ˆê¸°í™” ë° ì—…ë°ì´íŠ¸ (API í˜¸ì¶œ)\r\n  useEffect(() => {\r\n    const initializeAttacks = async () => {\r\n      console.log('ğŸ“… 7ì¼ê°„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (í•˜ë£¨ë‹¹ 20ê°œì”©):', {\r\n        ì‹œì‘: startDate.toISOString(),\r\n        ì¢…ë£Œ: endDate.toISOString()\r\n      });\r\n\r\n      // 7ì¼ê°„ ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ê°€ì ¸ì˜¤ê¸° (í•˜ë£¨ë‹¹ 20ê°œ)\r\n      const promises = [];\r\n      for (let day = 0; day < 7; day++) {\r\n        // UTC ì‹œê°„ëŒ€ë¡œ ë‚ ì§œ ìƒì„±\r\n        const dayStart = new Date(Date.UTC(2025, 8, 2 + day, 0, 0, 0, 0)); // 2025ë…„ 9ì›” 2ì¼ë¶€í„°\r\n        const dayEnd = new Date(Date.UTC(2025, 8, 2 + day, 23, 59, 59, 999));\r\n\r\n        console.log(`ğŸ“† ${day + 1}ì¼ì°¨ ë°ì´í„° ìš”ì²­ ì‹œì‘: ${dayStart.toISOString()}`);\r\n\r\n        promises.push(\r\n          fetchAndFormatAttackData(dayStart, dayEnd)\r\n            .then(dayData => {\r\n              console.log(`  âœ… ${day + 1}ì¼ì°¨ ì‘ë‹µ: ${dayData.length}ê°œ ì‘ì „`);\r\n\r\n              // IDë¥¼ ê³ ìœ í•˜ê²Œ ë§Œë“¤ê¸° (ë‚ ì§œ í¬í•¨)\r\n              const uniqueData = dayData.slice(0, 20).map((attack) => ({\r\n                ...attack,\r\n                id: `day${day}-${attack.id}` // ì˜ˆ: day0-attack-0, day1-attack-0\r\n              }));\r\n\r\n              return uniqueData;\r\n            })\r\n            .catch(error => {\r\n              console.error(`  âŒ ${day + 1}ì¼ì°¨ ì—ëŸ¬:`, error);\r\n              return [];\r\n            })\r\n        );\r\n      }\r\n\r\n      // ëª¨ë“  ìš”ì²­ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°\r\n      const allDayData = await Promise.all(promises);\r\n      const allData = allDayData.flat(); // 2ì°¨ì› ë°°ì—´ì„ 1ì°¨ì›ìœ¼ë¡œ í‰íƒ„í™”\r\n\r\n      console.log('ğŸ“Š ì¼ìë³„ ë°ì´í„° ê°œìˆ˜:', allDayData.map((data, i) => `${i+1}ì¼: ${data.length}ê°œ`).join(', '));\r\n\r\n      console.log(`âœ… ì´ ${allData.length}ê°œì˜ ì‘ì „ ë°ì´í„°ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.`);\r\n\r\n      if (allData.length > 0) {\r\n        console.log('ğŸ“Š ì „ì²´ ë°ì´í„° ì‹œê°„ ë²”ìœ„:', {\r\n          ì²«ë²ˆì§¸: new Date(allData[0].timestamp).toISOString(),\r\n          ë§ˆì§€ë§‰: new Date(allData[allData.length - 1].timestamp).toISOString()\r\n        });\r\n        console.log('ğŸ“Š ì²« 3ê°œ ì‘ì „ ìƒ˜í”Œ:', allData.slice(0, 3).map(a => ({\r\n          id: a.id,\r\n          timestamp: new Date(a.timestamp).toISOString(),\r\n          source: a.source.name,\r\n          target: a.target.name\r\n        })));\r\n      } else {\r\n        console.error('âŒ ë°ì´í„°ê°€ í•˜ë‚˜ë„ ì—†ìŠµë‹ˆë‹¤!');\r\n      }\r\n\r\n      setAllAttacks(allData);\r\n      console.log('ğŸ’¾ allAttacks ìƒíƒœì— ì €ì¥ ì™„ë£Œ:', allData.length, 'ê°œ');\r\n\r\n      // ì´ˆê¸°ì—ëŠ” ì „ì²´ 7ì¼ í‘œì‹œ\r\n      setTimeRange([0, 7]);\r\n      console.log('ğŸ“… ì´ˆê¸° timeRange ì„¤ì •: [0, 7]');\r\n    };\r\n\r\n    initializeAttacks();\r\n  }, [startDate, endDate]);\r\n\r\n  useEffect(() => {\r\n    if (!cesiumContainer.current) return;\r\n\r\n    const initializeCesium = async () => {\r\n      try {\r\n        console.log('Cesium ì´ˆê¸°í™” ì‹œì‘...');\r\n        console.log('Access Token:', Cesium.Ion.defaultAccessToken ? 'ì„¤ì •ë¨' : 'ì—†ìŒ');\r\n\r\n        // Cesium Viewer ìƒì„± - 3D ëª¨ë“œë§Œ ì§€ì›\r\n        viewer.current = new Cesium.Viewer(cesiumContainer.current, {\r\n          // UI ìš”ì†Œë“¤ ì •ë¦¬\r\n          animation: false,\r\n          baseLayerPicker: true,\r\n          fullscreenButton: true,\r\n          geocoder: true,\r\n          homeButton: true,\r\n          infoBox: true,\r\n          sceneModePicker: false,\r\n          scene3DOnly: true, // 3D ëª¨ë“œë§Œ ì§€ì›\r\n          selectionIndicator: true,\r\n          timeline: false,\r\n          navigationHelpButton: true,\r\n          navigationInstructionsInitiallyVisible: false,\r\n\r\n          // ê³ í’ˆì§ˆ ì§€í˜• ë°ì´í„° ì‚¬ìš©\r\n          terrainProvider: await Cesium.createWorldTerrainAsync({\r\n            requestWaterMask: true,\r\n            requestVertexNormals: true\r\n          }),\r\n\r\n          // ì—°ì† ë Œë”ë§ ê°•ì œ í™œì„±í™”\r\n          requestRenderMode: false,\r\n          maximumRenderTimeChange: Infinity\r\n        });\r\n\r\n        console.log('Cesium Viewer ìƒì„± ì™„ë£Œ');\r\n\r\n        // 3D ê±´ë¬¼ íƒ€ì¼ì…‹ ì¶”ê°€\r\n        try {\r\n          const buildingTileset = await Cesium.Cesium3DTileset.fromIonAssetId(96188);\r\n          viewer.current.scene.primitives.add(buildingTileset);\r\n          console.log('3D ê±´ë¬¼ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');\r\n        } catch (error) {\r\n          console.log('3D ê±´ë¬¼ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);\r\n        }\r\n\r\n        // ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë ˆì´ì–´ ì¶”ê°€\r\n        try {\r\n          const bingProvider = await Cesium.createWorldImageryAsync({\r\n            style: Cesium.IonWorldImageryStyle.AERIAL_WITH_LABELS\r\n          });\r\n          viewer.current.imageryLayers.addImageryProvider(bingProvider);\r\n          console.log('ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë ˆì´ì–´ ì¶”ê°€ ì™„ë£Œ');\r\n        } catch (error) {\r\n          console.log('ê³ í•´ìƒë„ ì´ë¯¸ì§€ ë ˆì´ì–´ ì¶”ê°€ ì‹¤íŒ¨:', error);\r\n        }\r\n\r\n        // ì§€êµ¬ë³¸ ê³ ê¸‰ ì„¤ì •\r\n        const scene = viewer.current.scene;\r\n        const globe = scene.globe;\r\n\r\n        // ì‹¤ì œì ì¸ ì¡°ëª… ë° ëŒ€ê¸° íš¨ê³¼\r\n        scene.skyAtmosphere.show = true;\r\n        scene.fog.enabled = true;\r\n        scene.fog.density = 0.0001;\r\n        scene.fog.screenSpaceErrorFactor = 2.0;\r\n\r\n        // ê³ í’ˆì§ˆ ì§€êµ¬ë³¸ ë Œë”ë§\r\n        globe.enableLighting = true;\r\n        globe.dynamicAtmosphereLighting = true;\r\n        globe.atmosphereLightIntensity = 10.0;\r\n        globe.showWaterEffect = true;\r\n\r\n        // ì§€í˜• ìƒì„¸ë„ ìµœëŒ€í™”\r\n        globe.maximumScreenSpaceError = 1.0;\r\n        globe.tileCacheSize = 1000;\r\n\r\n        // 3D ëª¨ë“œ ì¹´ë©”ë¼ ì»¨íŠ¸ë¡¤ ì„¤ì •\r\n        scene.screenSpaceCameraController.enableRotate = true;\r\n        scene.screenSpaceCameraController.enableTranslate = true;\r\n        scene.screenSpaceCameraController.enableZoom = true;\r\n        scene.screenSpaceCameraController.enableTilt = true;\r\n        scene.screenSpaceCameraController.enableLook = false;\r\n        scene.screenSpaceCameraController.enableInputs = true;\r\n\r\n        // 3D ëª¨ë“œ ì¤Œ ë²”ìœ„ ìµœì í™” - ìì—°ìŠ¤ëŸ¬ìš´ ë²”ìœ„ë¡œ ì¡°ì •\r\n        scene.screenSpaceCameraController.minimumZoomDistance = 500;        // ìµœì†Œ 500m (ë„ˆë¬´ ê°€ê¹Œì´ ëª»ê°€ê²Œ)\r\n        scene.screenSpaceCameraController.maximumZoomDistance = 20000000;   // ìµœëŒ€ 20,000km (ì ì ˆí•œ ê±°ë¦¬)\r\n\r\n        // ì¹´ë©”ë¼ê°€ í•­ìƒ ì§€êµ¬ ì¤‘ì‹¬ì„ ë°”ë¼ë³´ë„ë¡ ì„¤ì •\r\n        scene.screenSpaceCameraController.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\r\n\r\n        // ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„ì„ ìœ„í•œ ê´€ì„± ì„¤ì • ìµœì í™”\r\n        scene.screenSpaceCameraController.inertiaSpin = 0.95;\r\n        scene.screenSpaceCameraController.inertiaTranslate = 0.95;\r\n        scene.screenSpaceCameraController.inertiaZoom = 0.9;\r\n\r\n        // ìì—°ìŠ¤ëŸ¬ìš´ ì¤Œ ì†ë„ ìµœì í™”\r\n        scene.screenSpaceCameraController.zoomFactor = 5.0;\r\n        scene.screenSpaceCameraController.wheelZoomFactor = 10.0;  // ì •ìƒì ì¸ ì¤Œ ì†ë„\r\n\r\n        // ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš© ë° ì •ë³´ í‘œì‹œ í™œì„±í™”\r\n        viewer.current.cesiumWidget.creditContainer.style.display = \"none\";\r\n\r\n        // ì§€í˜• í´ë¦­ ì‹œ ì¢Œí‘œ ì •ë³´ í‘œì‹œ\r\n        viewer.current.screenSpaceEventHandler.setInputAction((event) => {\r\n          const cartesian = viewer.current.camera.pickEllipsoid(event.position, scene.globe.ellipsoid);\r\n          if (cartesian) {\r\n            const cartographic = Cesium.Cartographic.fromCartesian(cartesian);\r\n            const longitude = Cesium.Math.toDegrees(cartographic.longitude);\r\n            const latitude = Cesium.Math.toDegrees(cartographic.latitude);\r\n            const height = cartographic.height;\r\n\r\n            console.log(`ìœ„ì¹˜: ìœ„ë„ ${latitude.toFixed(6)}, ê²½ë„ ${longitude.toFixed(6)}, ê³ ë„ ${height.toFixed(2)}m`);\r\n          }\r\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n\r\n        // ì´ˆê¸° ì¹´ë©”ë¼ ìœ„ì¹˜ - ë¶í•œ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì •\r\n        const northKoreaView = {\r\n          destination: Cesium.Cartesian3.fromDegrees(125.7625, 39.0392, 8000000),\r\n          orientation: {\r\n            heading: 0,\r\n            pitch: -Cesium.Math.PI_OVER_TWO,\r\n            roll: 0\r\n          }\r\n        };\r\n\r\n        viewer.current.camera.setView(northKoreaView);\r\n\r\n        // í™ˆ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œë„ ë¶í•œ ì¤‘ì‹¬ìœ¼ë¡œ\r\n        viewer.current.homeButton.viewModel.command.beforeExecute.addEventListener((e) => {\r\n          e.cancel = true;\r\n          viewer.current.camera.setView(northKoreaView);\r\n        });\r\n\r\n        // ê³ í’ˆì§ˆ ë Œë”ë§ ì„¤ì •\r\n        if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n          viewer.current.resolutionScale = window.devicePixelRatio;\r\n        }\r\n\r\n        // ì¥ë©´ ì„¤ì •\r\n        scene.postProcessStages.fxaa.enabled = true;\r\n\r\n        // ì• ë‹ˆë©”ì´ì…˜ ì‹œê³„ ì„¤ì •\r\n        viewer.current.clock.shouldAnimate = true;\r\n        viewer.current.clock.multiplier = 1.0;\r\n        viewer.current.clock.currentTime = Cesium.JulianDate.now();\r\n\r\n        // ê°•ì œ ì—°ì† ë Œë”ë§\r\n        scene.requestRenderMode = false;\r\n        scene.maximumRenderTimeChange = Infinity;\r\n\r\n        // requestAnimationFrame ID ì €ì¥ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)\r\n        let animationFrameId = null;\r\n        const forceRender = () => {\r\n          if (viewer.current && !viewer.current.isDestroyed()) {\r\n            scene.requestRender();\r\n            animationFrameId = requestAnimationFrame(forceRender);\r\n          }\r\n        };\r\n        forceRender();\r\n\r\n        // ì‹œê³„ë¥¼ í•­ìƒ ì‹¤í–‰ ìƒíƒœë¡œ ìœ ì§€ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ - interval ID ì €ì¥)\r\n        const clockIntervalId = setInterval(() => {\r\n          if (viewer.current && !viewer.current.isDestroyed()) {\r\n            viewer.current.clock.tick();\r\n          }\r\n        }, 16);\r\n\r\n        // cleanup í•¨ìˆ˜ë“¤ì„ ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì €ì¥\r\n        viewer.current._cleanupIds = {\r\n          animationFrameId,\r\n          clockIntervalId\r\n        };\r\n\r\n        setIsLoaded(true);\r\n\r\n      } catch (error) {\r\n        console.error('Cesium ì´ˆê¸°í™” ì˜¤ë¥˜:', error);\r\n        setError(`Cesium ì´ˆê¸°í™” ì‹¤íŒ¨: ${error.message}`);\r\n      }\r\n    };\r\n\r\n    initializeCesium();\r\n\r\n    // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬ (ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€)\r\n    return () => {\r\n      if (viewer.current) {\r\n        // intervalê³¼ animationFrame ì •ë¦¬\r\n        if (viewer.current._cleanupIds) {\r\n          if (viewer.current._cleanupIds.animationFrameId) {\r\n            cancelAnimationFrame(viewer.current._cleanupIds.animationFrameId);\r\n          }\r\n          if (viewer.current._cleanupIds.clockIntervalId) {\r\n            clearInterval(viewer.current._cleanupIds.clockIntervalId);\r\n          }\r\n        }\r\n\r\n        viewer.current.destroy();\r\n        viewer.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ ê´€ë¦¬\r\n  const [animationEntities, setAnimationEntities] = useState([]);\r\n  const [selectedAttackId, setSelectedAttackId] = useState(null);\r\n  const [selectedBuildingAttacks, setSelectedBuildingAttacks] = useState([]);\r\n  const [highlightedBuildings, setHighlightedBuildings] = useState([]);\r\n  const [markerHighlights, setMarkerHighlights] = useState([]);\r\n\r\n  // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ë¥¼ ê°•ì œë¡œ ì œê±°í•˜ëŠ” í•¨ìˆ˜\r\n  const clearAllHighlights = useCallback(() => {\r\n    if (!viewer.current) return;\r\n\r\n    // ëª¨ë“  ì—”í‹°í‹°ë¥¼ ìˆœíšŒí•˜ë©° í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n    const entities = viewer.current.entities.values;\r\n    for (let i = 0; i < entities.length; i++) {\r\n      const entity = entities[i];\r\n      if (entity && entity.id) {\r\n        const entityId = entity.id;\r\n        // source ë˜ëŠ” target ë§ˆì»¤ì¸ ê²½ìš°ì—ë§Œ ìƒ‰ìƒ ë³µì›\r\n        if (entityId.startsWith('source-building-3d-') || entityId.startsWith('target-building-3d-')) {\r\n          resetEntityColors(entity, entityId);\r\n        }\r\n      }\r\n    }\r\n\r\n    // ìƒíƒœ ì´ˆê¸°í™”\r\n    setHighlightedBuildings([]);\r\n    setMarkerHighlights([]);\r\n  }, []);\r\n\r\n  // ì§€ë„ì—ì„œ ê±´ë¬¼ í•˜ì´ë¼ì´íŠ¸ í•¨ìˆ˜ (ìµœì í™” ë²„ì „)\r\n  const highlightBuildingOnMap = useCallback((attackId) => {\r\n    if (!viewer.current || !attacks) return;\r\n\r\n    const attack = findAttackById(attacks, attackId);\r\n    if (!attack) return;\r\n\r\n    // ê¸°ì¡´ í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n    highlightedBuildings.forEach(entityId => {\r\n      const entity = viewer.current.entities.getById(entityId);\r\n      if (entity) {\r\n        resetEntityColors(entity, entityId);\r\n      }\r\n    });\r\n\r\n    // ìƒˆë¡œìš´ í•˜ì´ë¼ì´íŠ¸ ì ìš© (3D ëª¨ë“œìš© ID)\r\n    const targetPrefix = `target-building-3d-${attack.id}`;\r\n    const sourcePrefix = `source-building-3d-${attack.id}`;\r\n\r\n    const targetEntity = viewer.current.entities.getById(targetPrefix);\r\n    const sourceEntity = viewer.current.entities.getById(sourcePrefix);\r\n\r\n    const newHighlighted = [];\r\n\r\n    if (targetEntity) {\r\n      highlightEntity(targetEntity, false);\r\n      newHighlighted.push(targetPrefix);\r\n    }\r\n\r\n    if (sourceEntity) {\r\n      highlightEntity(sourceEntity, true);\r\n      newHighlighted.push(sourcePrefix);\r\n    }\r\n\r\n    setHighlightedBuildings(newHighlighted);\r\n  }, [attacks, highlightedBuildings]);\r\n\r\n  // ê±´ë¬¼ í´ë¦­ ì‹œ ê´€ë ¨ëœ ëª¨ë“  ê³µê²© í•˜ì´ë¼ì´íŠ¸ (ìµœì í™” ë²„ì „)\r\n  const highlightBuildingAttacks = useCallback((clickedAttack, entityId) => {\r\n    if (!viewer.current || !attacks) return;\r\n\r\n    // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ê°•ì œ ì œê±°\r\n    clearAllHighlights();\r\n\r\n    // í´ë¦­ëœ ê±´ë¬¼ì„ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” ëª¨ë“  ê³µê²© ì°¾ê¸°\r\n    const clickedBuildingName = entityId.includes('target')\r\n      ? clickedAttack.target.building.name\r\n      : clickedAttack.source.building.name;\r\n    const isTargetClick = entityId.includes('target');\r\n\r\n    const relatedAttacks = isTargetClick\r\n      ? attacks.filter(attack => attack.target.building.name === clickedBuildingName)\r\n      : attacks.filter(attack => attack.source.building.name === clickedBuildingName);\r\n\r\n    if (relatedAttacks.length === 0) return;\r\n\r\n    // ê´€ë ¨ëœ ëª¨ë“  ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n    const newMarkerHighlights = [];\r\n\r\n    relatedAttacks.forEach(attack => {\r\n      const sourceEntityId = `source-building-3d-${attack.id}`;\r\n      const targetEntityId = `target-building-3d-${attack.id}`;\r\n\r\n      const sourceEntity = viewer.current.entities.getById(sourceEntityId);\r\n      const targetEntity = viewer.current.entities.getById(targetEntityId);\r\n\r\n      if (sourceEntity) {\r\n        highlightEntity(sourceEntity, true);\r\n        newMarkerHighlights.push(sourceEntityId);\r\n      }\r\n\r\n      if (targetEntity) {\r\n        highlightEntity(targetEntity, false);\r\n        newMarkerHighlights.push(targetEntityId);\r\n      }\r\n    });\r\n\r\n    setMarkerHighlights(newMarkerHighlights);\r\n\r\n    // ê´€ë ¨ëœ ëª¨ë“  ë¡œê·¸ í•˜ì´ë¼ì´íŠ¸\r\n    const relatedAttackIds = relatedAttacks.map(attack => attack.id);\r\n    setSelectedBuildingAttacks(relatedAttackIds);\r\n    setSelectedAttackId(null);\r\n\r\n    // ì²« ë²ˆì§¸ ê´€ë ¨ ë¡œê·¸ë¡œ ìŠ¤í¬ë¡¤\r\n    if (relatedAttacks.length > 0) {\r\n      scrollToLog(relatedAttacks[0].id);\r\n    }\r\n  }, [attacks, clearAllHighlights]);\r\n\r\n  // IP ê¸°ë°˜ ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸ í•¨ìˆ˜ (ìµœì í™” ë²„ì „)\r\n  const highlightMarkerAndLogs = useCallback((clickedAttack, entityId) => {\r\n    if (!viewer.current || !attacks) return;\r\n\r\n    // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ê°•ì œ ì œê±°\r\n    clearAllHighlights();\r\n\r\n    // í´ë¦­ëœ ë§ˆì»¤ê°€ sourceì¸ì§€ targetì¸ì§€ í™•ì¸\r\n    const isSource = entityId.includes('source');\r\n    const clickedIP = isSource ? clickedAttack.source.ip : clickedAttack.target.ip;\r\n\r\n    // í•´ë‹¹ IPì™€ ê´€ë ¨ëœ ëª¨ë“  ê³µê²© ì°¾ê¸°\r\n    const relatedAttacks = attacks.filter(attack =>\r\n      attack.source.ip === clickedIP || attack.target.ip === clickedIP\r\n    );\r\n\r\n    if (relatedAttacks.length > 0) {\r\n      // ëª¨ë“  ê´€ë ¨ëœ ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n      const newMarkerHighlights = [];\r\n\r\n      relatedAttacks.forEach(attack => {\r\n        const sourceEntityId = `source-building-3d-${attack.id}`;\r\n        const targetEntityId = `target-building-3d-${attack.id}`;\r\n\r\n        const sourceEntity = viewer.current.entities.getById(sourceEntityId);\r\n        const targetEntity = viewer.current.entities.getById(targetEntityId);\r\n\r\n        // Source ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n        if (sourceEntity && attack.source.ip === clickedIP) {\r\n          highlightEntity(sourceEntity, true);\r\n          newMarkerHighlights.push(sourceEntityId);\r\n        }\r\n\r\n        // Target ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n        if (targetEntity && attack.target.ip === clickedIP) {\r\n          highlightEntity(targetEntity, false);\r\n          newMarkerHighlights.push(targetEntityId);\r\n        }\r\n      });\r\n\r\n      setMarkerHighlights(newMarkerHighlights);\r\n\r\n      // ê´€ë ¨ëœ ë¡œê·¸ë“¤ í•˜ì´ë¼ì´íŠ¸\r\n      const relatedAttackIds = relatedAttacks.map(attack => attack.id);\r\n      setSelectedBuildingAttacks(relatedAttackIds);\r\n      setSelectedAttackId(null);\r\n\r\n      // ì²« ë²ˆì§¸ ê´€ë ¨ ë¡œê·¸ë¡œ ìŠ¤í¬ë¡¤\r\n      if (relatedAttacks.length > 0) {\r\n        scrollToLog(relatedAttacks[0].id);\r\n      }\r\n    }\r\n  }, [attacks, clearAllHighlights]);\r\n\r\n  // 3D ëª¨ë“œìš© ì—”í‹°í‹° ìƒì„± í•¨ìˆ˜\r\n  const create3DEntities = (attacks) => {\r\n    if (!viewer.current || !attacks || attacks.length === 0) return;\r\n\r\n    try {\r\n      const beamColor = '#FF0000';\r\n      const startTime = viewer.current.clock.currentTime;\r\n\r\n      attacks.forEach((attack) => {\r\n        // ì¢Œí‘œ ìœ íš¨ì„± ê²€ì¦\r\n        const sourceLon = parseFloat(attack.source.building.lon);\r\n        const sourceLat = parseFloat(attack.source.building.lat);\r\n        const targetLon = parseFloat(attack.target.building.lon);\r\n        const targetLat = parseFloat(attack.target.building.lat);\r\n\r\n        if (isNaN(sourceLon) || isNaN(sourceLat) || isNaN(targetLon) || isNaN(targetLat)) {\r\n          console.warn('3D ëª¨ë“œ: ì˜ëª»ëœ ì¢Œí‘œ ë°ì´í„°');\r\n          return;\r\n        }\r\n\r\n        // 3Dì—ì„œëŠ” ê±´ë¬¼ ë†’ì´ë¥¼ ë” ë†’ê²Œ ì„¤ì •\r\n        const markerHeight3D = 5000; // ë§ˆì»¤ ë†’ì´ ì¦ê°€\r\n        const buildingHeight = 0; // ì§€ìƒ ê±´ë¬¼ ë†’ì´\r\n        const sourceMarkerPos = Cesium.Cartesian3.fromDegrees(sourceLon, sourceLat, markerHeight3D);\r\n        const targetMarkerPos = Cesium.Cartesian3.fromDegrees(targetLon, targetLat, markerHeight3D);\r\n        const sourceBuildingPos = Cesium.Cartesian3.fromDegrees(sourceLon, sourceLat, buildingHeight);\r\n        const targetBuildingPos = Cesium.Cartesian3.fromDegrees(targetLon, targetLat, buildingHeight);\r\n\r\n        console.log('3D ë§ˆì»¤ ìƒì„±:', {\r\n          attack: attack.id,\r\n          source: `${attack.source.building.name} (${sourceLon}, ${sourceLat})`,\r\n          target: `${attack.target.building.name} (${targetLon}, ${targetLat})`,\r\n          sourceIP: attack.source.ip,\r\n          targetIP: attack.target.ip\r\n        });\r\n\r\n        // 3D ì†ŒìŠ¤ ë§ˆì»¤ (ê³µê²© ì¶œë°œì§€)\r\n        viewer.current.entities.add({\r\n          id: `source-building-3d-${attack.id}`,\r\n          position: sourceMarkerPos,\r\n          point: {\r\n            pixelSize: 6,\r\n            color: Cesium.Color.YELLOW,\r\n            outlineColor: Cesium.Color.RED,\r\n            outlineWidth: 2,\r\n            heightReference: Cesium.HeightReference.NONE,\r\n            scaleByDistance: new Cesium.NearFarScalar(1.5e2, 2.0, 1.5e7, 0.5),\r\n            disableDepthTestDistance: Number.POSITIVE_INFINITY,\r\n            show: true\r\n          },\r\n          buildingData: {\r\n            name: attack.source.building.name,\r\n            country: attack.source.name,\r\n            type: 'source'\r\n          }\r\n        });\r\n\r\n        // ì†ŒìŠ¤ ë§ˆì»¤ì—ì„œ ì§€ìƒ ê±´ë¬¼ë¡œ ì—°ê²°ì„ \r\n        viewer.current.entities.add({\r\n          id: `source-line-${attack.id}`,\r\n          polyline: {\r\n            positions: [sourceMarkerPos, sourceBuildingPos],\r\n            width: 3,\r\n            material: Cesium.Color.WHITE.withAlpha(0.2),\r\n            clampToGround: false,\r\n            show: true\r\n          }\r\n        });\r\n\r\n        // 3D íƒ€ê²Ÿ ë§ˆì»¤ (ê³µê²© ë°›ëŠ” ê³³)\r\n        viewer.current.entities.add({\r\n          id: `target-building-3d-${attack.id}`,\r\n          position: targetMarkerPos,\r\n          point: {\r\n            pixelSize: 6,\r\n            color: Cesium.Color.CYAN,\r\n            outlineColor: Cesium.Color.BLUE,\r\n            outlineWidth: 2,\r\n            heightReference: Cesium.HeightReference.NONE,\r\n            scaleByDistance: new Cesium.NearFarScalar(1.5e2, 2.0, 1.5e7, 0.5),\r\n            disableDepthTestDistance: Number.POSITIVE_INFINITY,\r\n            show: true\r\n          },\r\n          buildingData: {\r\n            name: attack.target.building.name,\r\n            country: attack.target.name,\r\n            type: 'target'\r\n          }\r\n        });\r\n\r\n        // íƒ€ê²Ÿ ë§ˆì»¤ì—ì„œ ì§€ìƒ ê±´ë¬¼ë¡œ ì—°ê²°ì„ \r\n        viewer.current.entities.add({\r\n          id: `target-line-${attack.id}`,\r\n          polyline: {\r\n            positions: [targetMarkerPos, targetBuildingPos],\r\n            width: 3,\r\n            material: Cesium.Color.WHITE.withAlpha(0.2),\r\n            clampToGround: false,\r\n            show: true\r\n          }\r\n        });\r\n\r\n        // 3D ì•„ì¹˜í˜• ê´‘ì„ \r\n        const positions = [];\r\n        for (let i = 0; i <= 30; i++) {\r\n          const segmentProgress = i / 30;\r\n          const lerpedPos = Cesium.Cartesian3.lerp(sourceMarkerPos, targetMarkerPos, segmentProgress, new Cesium.Cartesian3());\r\n\r\n          // ì•„ì¹˜ ë†’ì´ë¥¼ ë§ˆì»¤ ë†’ì´ ê¸°ì¤€ìœ¼ë¡œ ì¶”ê°€\r\n          const archHeight = Math.sin(segmentProgress * Math.PI) * 50000;\r\n          const cartographic = Cesium.Cartographic.fromCartesian(lerpedPos);\r\n          cartographic.height = markerHeight3D + archHeight;\r\n          positions.push(Cesium.Cartographic.toCartesian(cartographic));\r\n        }\r\n\r\n        // ì²« ë²ˆì§¸ì™€ ë§ˆì§€ë§‰ ì ì„ ì •í™•íˆ ë§ˆì»¤ ìœ„ì¹˜ë¡œ ì„¤ì •\r\n        positions[0] = sourceMarkerPos;\r\n        positions[positions.length - 1] = targetMarkerPos;\r\n\r\n        viewer.current.entities.add({\r\n          id: `beam-3d-${attack.id}`,\r\n          polyline: {\r\n            positions: positions,\r\n            width: 6,\r\n            material: new Cesium.PolylineGlowMaterialProperty({\r\n              glowPower: 0.05,\r\n              color: new Cesium.CallbackProperty((time) => {\r\n                const t = Cesium.JulianDate.secondsDifference(time, startTime) % 3.0;\r\n                const progress = t / 3.0;\r\n                const alpha = 0.15 + 0.05 * Math.sin(progress * Math.PI * 2);\r\n                return Cesium.Color.fromCssColorString(beamColor).withAlpha(alpha);\r\n              }, false)\r\n            }),\r\n            clampToGround: false\r\n          },\r\n          description: `ğŸ”´ ì‚¬ì´ë²„ ì‘ì „: ${attack.source.name} â†’ ${attack.target.name}`,\r\n          attackData: attack\r\n        });\r\n\r\n        console.log(`âœ… 3D ê³µê²© ì²˜ë¦¬ ì™„ë£Œ: ${attack.source.building.name} â†’ ${attack.target.building.name}`);\r\n      });\r\n    } catch (error) {\r\n      console.error('3D ì—”í‹°í‹° ìƒì„± ì˜¤ë¥˜:', error);\r\n    }\r\n  };\r\n\r\n  // ê³µê²© ì‹œê°í™” íš¨ê³¼\r\n  useEffect(() => {\r\n    if (!viewer.current || !isLoaded || !attacks || attacks.length === 0) return;\r\n\r\n    try {\r\n      // ê¸°ì¡´ ì—”í‹°í‹° ì œê±°\r\n      viewer.current.entities.removeAll();\r\n\r\n      // ê¸°ì¡´ ì• ë‹ˆë©”ì´ì…˜ ì •ë¦¬\r\n      animationEntities.forEach(entity => {\r\n        if (entity.interval) clearInterval(entity.interval);\r\n      });\r\n      setAnimationEntities([]);\r\n\r\n      // 3D ì—”í‹°í‹° ìƒì„±\r\n      create3DEntities(attacks);\r\n    } catch (error) {\r\n      console.error('ì—”í‹°í‹° ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\r\n    }\r\n\r\n    // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬\r\n    if (viewer.current.screenSpaceEventHandler) {\r\n      viewer.current.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n      viewer.current.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\r\n    }\r\n\r\n    // ì‹±ê¸€ í´ë¦­ ì´ë²¤íŠ¸\r\n    viewer.current.screenSpaceEventHandler.setInputAction((click) => {\r\n      try {\r\n        const pickedObject = viewer.current.scene.pick(click.position);\r\n\r\n        if (pickedObject && pickedObject.id) {\r\n          // ID ì°¾ê¸°\r\n          let entityId = null;\r\n          if (pickedObject.id.id) {\r\n            entityId = pickedObject.id.id;\r\n          } else if (pickedObject.id._id) {\r\n            entityId = pickedObject.id._id;\r\n          } else if (typeof pickedObject.id === 'string') {\r\n            entityId = pickedObject.id;\r\n          }\r\n\r\n          // ë¨¼ì € ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n          clearAllHighlights();\r\n\r\n          // ê±´ë¬¼ í´ë¦­ ì²˜ë¦¬\r\n          const isSourceBuilding = entityId && entityId.startsWith('source-building-3d-');\r\n          const isTargetBuilding = entityId && entityId.startsWith('target-building-3d-');\r\n\r\n          if (isSourceBuilding || isTargetBuilding) {\r\n            // IDì—ì„œ attack ID ì¶”ì¶œ\r\n            let attackId = null;\r\n            if (entityId.startsWith('source-building-3d-')) {\r\n              attackId = entityId.replace('source-building-3d-', '');\r\n            } else if (entityId.startsWith('target-building-3d-')) {\r\n              attackId = entityId.replace('target-building-3d-', '');\r\n            }\r\n\r\n            if (attackId) {\r\n              // ê³µê²© ì°¾ê¸° (íƒ€ì… ì•ˆì •ì„± ê°œì„ ëœ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì‚¬ìš©)\r\n              const clickedAttack = findAttackById(attacks, attackId);\r\n\r\n              if (clickedAttack) {\r\n                // ìƒˆë¡œìš´ ë§ˆì»¤ í•˜ì´ë¼ì´íŠ¸\r\n                highlightBuildingAttacks(clickedAttack, entityId);\r\n                return;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // ë¹ˆ ê³µê°„ í´ë¦­ ì‹œ ì„ íƒ í•´ì œ\r\n        setSelectedAttackId(null);\r\n        setSelectedBuildingAttacks([]);\r\n\r\n        // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n        clearAllHighlights();\r\n      } catch (error) {\r\n        console.error('í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜¤ë¥˜:', error);\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK);\r\n\r\n    // ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸ - ë§ˆì»¤ë¡œ í™•ëŒ€\r\n    viewer.current.screenSpaceEventHandler.setInputAction((click) => {\r\n      try {\r\n        const pickedObject = viewer.current.scene.pick(click.position);\r\n\r\n        if (pickedObject && pickedObject.id) {\r\n          // ID ì°¾ê¸°\r\n          let entityId = null;\r\n          if (pickedObject.id.id) {\r\n            entityId = pickedObject.id.id;\r\n          } else if (pickedObject.id._id) {\r\n            entityId = pickedObject.id._id;\r\n          } else if (typeof pickedObject.id === 'string') {\r\n            entityId = pickedObject.id;\r\n          }\r\n\r\n          // ë§ˆì»¤ì¸ì§€ í™•ì¸\r\n          const isSourceMarker = entityId && entityId.startsWith('source-building-3d-');\r\n          const isTargetMarker = entityId && entityId.startsWith('target-building-3d-');\r\n\r\n          if (isSourceMarker || isTargetMarker) {\r\n            const entity = viewer.current.entities.getById(entityId);\r\n            if (entity && entity.position) {\r\n              const position = entity.position.getValue(viewer.current.clock.currentTime);\r\n              if (position) {\r\n                const cartographic = Cesium.Cartographic.fromCartesian(position);\r\n                const longitude = Cesium.Math.toDegrees(cartographic.longitude);\r\n                const latitude = Cesium.Math.toDegrees(cartographic.latitude);\r\n\r\n                // 3D ëª¨ë“œì—ì„œ ì ì ˆí•œ ì¤Œ ë ˆë²¨ë¡œ ì´ë™ (í˜„ì¬ ê°ë„ ìœ ì§€)\r\n                viewer.current.camera.flyTo({\r\n                  destination: Cesium.Cartesian3.fromDegrees(longitude, latitude, 50000), // 50km ê³ ë„\r\n                  duration: 1.5,\r\n                  complete: () => {\r\n                    // ì¹´ë©”ë¼ ì´ë™ ì™„ë£Œ í›„ ì»¨íŠ¸ë¡¤ ì¬í™œì„±í™”\r\n                    viewer.current.scene.screenSpaceCameraController.enableInputs = true;\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('ë”ë¸”í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì˜¤ë¥˜:', error);\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);\r\n  }, [attacks, isLoaded]);\r\n\r\n  if (error) {\r\n    return (\r\n      <Box\r\n        sx={{\r\n          width: '100%',\r\n          height: '100%',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          bgcolor: '#f5f5f5',\r\n          borderRadius: 2,\r\n          p: 2\r\n        }}\r\n      >\r\n        <Typography color=\"error\" sx={{ mb: 2, textAlign: 'center' }}>\r\n          {error}\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ textAlign: 'center', color: 'text.secondary' }}>\r\n          1. https://cesium.com/ion/ ë°©ë¬¸<br/>\r\n          2. ë¬´ë£Œ ê³„ì • ìƒì„±<br/>\r\n          3. Access Token ë°œê¸‰<br/>\r\n          4. EarthGlobe.jsx íŒŒì¼ì˜ í† í° êµì²´\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Card \r\n      component=\"main\"\r\n      role=\"main\"\r\n      aria-label=\"3D ì§€êµ¬ë³¸ ê¸°ë°˜ ì‚¬ì´ë²„ ê³µê²© ì‹œê°í™”\"\r\n      sx={{\r\n        width: '100%',\r\n        height: 'calc(100vh - 120px)',\r\n        bgcolor: 'background.paper',\r\n        boxShadow: 3,\r\n        m: 0\r\n      }}\r\n    >\r\n      <CardContent sx={{\r\n        p: 1,\r\n        height: '100%',\r\n        '&:last-child': { pb: 1 },\r\n        display: 'flex',\r\n        flexDirection: { xs: 'column', lg: 'row' },\r\n        gap: 1,\r\n        overflow: 'hidden'\r\n      }}>\r\n        {/* ì§€êµ¬ë³¸ ì˜ì—­ */}\r\n        <Card \r\n          component=\"section\"\r\n          aria-label=\"3D ì§€êµ¬ë³¸ ì˜ì—­\"\r\n          sx={{\r\n            flex: 1,\r\n            position: 'relative',\r\n            overflow: 'hidden',\r\n            height: '100%',\r\n            bgcolor: '#000',\r\n            border: '1px solid #333',\r\n            boxShadow: '0 4px 12px rgba(0,0,0,0.3)'\r\n          }}\r\n        >\r\n          <CardContent sx={{ p: 0, height: '100%', '&:last-child': { pb: 0 } }}>\r\n            <div\r\n              ref={cesiumContainer}\r\n              role=\"img\"\r\n              aria-label=\"ì‚¬ì´ë²„ ê³µê²© ê²½ë¡œë¥¼ í‘œì‹œí•˜ëŠ” 3D ì§€êµ¬ë³¸\"\r\n              style={{\r\n                width: '100%',\r\n                height: '100%'\r\n              }}\r\n            />\r\n            {!isLoaded && (\r\n              <Box\r\n                role=\"status\"\r\n                aria-live=\"polite\"\r\n                aria-label=\"ì§€êµ¬ë³¸ ë¡œë”© ì¤‘\"\r\n                sx={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  bgcolor: 'rgba(0,0,0,0.8)',\r\n                  color: 'white'\r\n                }}\r\n              >\r\n                <Typography>ì‹¤ì œ ì§€êµ¬ë³¸ ë¡œë”© ì¤‘...</Typography>\r\n              </Box>\r\n            )}\r\n\r\n            {/* í’ˆì§ˆ í‘œì‹œ */}\r\n            {isLoaded && (\r\n              <Box sx={{\r\n                position: 'absolute',\r\n                top: 8,\r\n                left: 8,\r\n                background: 'rgba(0,0,0,0.7)',\r\n                color: 'white',\r\n                padding: '4px 8px',\r\n                borderRadius: 1,\r\n                fontSize: 10\r\n              }}>\r\n                <Typography variant=\"caption\" color=\"inherit\">\r\n                  ğŸŒ ì‹œê³„ì—´ ê¸°ë°˜ ì´ìƒíƒì§€ \r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n\r\n        {/* ê³µê²© í˜„í™© íŒ¨ë„ */}\r\n        <Box \r\n          component=\"aside\"\r\n          aria-label=\"ê³µê²© í˜„í™© íŒ¨ë„\"\r\n          sx={{\r\n            width: { xs: '100%', lg: 350 },\r\n            maxWidth: { xs: '100%', lg: 400 },\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: 2,\r\n            height: '100%',\r\n            overflow: 'hidden'\r\n          }}\r\n        >\r\n          {/* ì‹¤ì‹œê°„ í†µê³„ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ì‹¤ì‹œê°„ ê³µê²© í†µê³„\"\r\n            sx={{\r\n              bgcolor: '#f0edfd',\r\n              color: '#333',\r\n              border: '1px solid #d0c9f0',\r\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n              minHeight: 0,\r\n              flexShrink: 0\r\n            }}\r\n          >\r\n            <CardContent>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <Box sx={{ textAlign: 'center' }}>\r\n                    <Typography \r\n                      variant=\"h4\" \r\n                      sx={{ color: '#7c3aed', fontWeight: 'bold' }}\r\n                      aria-label={`ì´ ì‘ì „ ìˆ˜ ${attackStats.total}ê°œ`}\r\n                    >\r\n                      {attackStats.total}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{ color: '#666' }}>\r\n                      ì´ ì‘ì „ ìˆ˜\r\n                    </Typography>\r\n                  </Box>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Box sx={{ textAlign: 'center' }}>\r\n                    <Typography \r\n                      variant=\"h4\" \r\n                      sx={{ color: '#9333ea', fontWeight: 'bold' }}\r\n                      aria-label={`í™œì„± ì‘ì „ ${attackStats.active}ê°œ`}\r\n                    >\r\n                      {attackStats.active}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{ color: '#666' }}>\r\n                      í™œì„± ì‘ì „\r\n                    </Typography>\r\n                  </Box>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* ìµœê·¼ ê³µê²© ëª©ë¡ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ìµœê·¼ ê³µê²© ëª©ë¡\"\r\n            sx={{\r\n              bgcolor: 'transparent',\r\n              color: '#333',\r\n              flex: 1,\r\n              minHeight: 0,\r\n              border: 'none',\r\n              boxShadow: 'none',\r\n              display: 'flex',\r\n              flexDirection: 'column'\r\n            }}\r\n          >\r\n            <CardContent sx={{\r\n              height: '100%',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              flex: 1,\r\n              '&:last-child': { pb: 2 }\r\n            }}>\r\n              <Box\r\n                ref={logListRef}\r\n                role=\"list\"\r\n                aria-label=\"ê³µê²© ë¡œê·¸ ëª©ë¡\"\r\n                sx={{\r\n                  flex: 1,\r\n                  overflow: 'auto',\r\n                  minHeight: 0\r\n                }}\r\n              >\r\n              {attacks && attacks.map((attack, index) => (\r\n                <Box\r\n                  id={`log-${attack.id}`}\r\n                  key={attack.id}\r\n                  data-attack-id={attack.id}\r\n                  role=\"listitem\"\r\n                  tabIndex={0}\r\n                  aria-label={`ê³µê²© ì •ë³´: ${attack.type}, ${attack.source.name}ì—ì„œ ${attack.target.name}ë¡œ, ì¶œë°œì§€ IP ${attack.source.ip}`}\r\n                  aria-selected={selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)}\r\n                  sx={{\r\n                    p: 1,\r\n                    mb: 1,\r\n                    bgcolor: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? 'rgba(124,58,237,0.2)' : 'rgba(124,58,237,0.05)',\r\n                    borderRadius: 1,\r\n                    borderLeft: '3px solid #7c3aed',\r\n                    border: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? '2px solid #7c3aed' : 'none',\r\n                    boxShadow: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? '0 0 10px rgba(124,58,237,0.4)' : 'none',\r\n                    animation: (selectedAttackId === attack.id || selectedBuildingAttacks.includes(attack.id)) ? 'pulse 1.5s infinite' : 'none',\r\n                    cursor: 'pointer',\r\n                    transition: 'all 0.3s ease',\r\n                    position: 'relative'\r\n                  }}\r\n                  onClick={() => {\r\n                    const newSelectedId = selectedAttackId === attack.id ? null : attack.id;\r\n                    setSelectedAttackId(newSelectedId);\r\n                    setSelectedBuildingAttacks([]);\r\n\r\n                    // ë¡œê·¸ í´ë¦­ ì‹œ ì§€ë„ì—ì„œ í•´ë‹¹ ê±´ë¬¼ í•˜ì´ë¼ì´íŠ¸ ë° ì´ë™\r\n                    if (newSelectedId) {\r\n                      clearAllHighlights();\r\n                      highlightBuildingOnMap(attack.id);\r\n                    } else {\r\n                      // ì„ íƒ í•´ì œ ì‹œ ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°\r\n                      clearAllHighlights();\r\n                    }\r\n                  }}\r\n                >\r\n                  <Typography variant=\"body2\" sx={{ fontWeight: 'bold', color: '#333' }}>\r\n                    ğŸ”´ {attack.type} - ì§„í–‰ì¤‘\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ color: '#666' }}>\r\n                    {attack.source.name} â†’ {attack.target.name}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    ì¶œë°œì§€ IP: {attack.source.ip}:{attack.source.port}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    ëŒ€ìƒ IP: {attack.target.ip}:{attack.target.port}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    Subnet: {attack.target.subnet} | Gateway: {attack.target.gateway}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    DNS: {attack.target.dns} | Count: {attack.count}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#888', fontSize: '10px' }}>\r\n                    {attack.timestamp.toLocaleString('ko-KR', {\r\n                      timeZone: 'Asia/Seoul',\r\n                      year: 'numeric',\r\n                      month: '2-digit',\r\n                      day: '2-digit',\r\n                      hour: '2-digit',\r\n                      minute: '2-digit',\r\n                      second: '2-digit'\r\n                    })}\r\n                  </Typography>\r\n\r\n                  {/* ë‚´ë¶€ë§ ì´ë™ ì•„ì´ì½˜ */}\r\n                  <IconButton\r\n                    size=\"small\"\r\n                    aria-label=\"ë‚´ë¶€ë§ í† í´ë¡œì§€ë¡œ ì´ë™\"\r\n                    title=\"ë‚´ë¶€ë§ í† í´ë¡œì§€ë¡œ ì´ë™\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      navigate('/ExtInt/internaltopology');\r\n                    }}\r\n                    sx={{\r\n                      position: 'absolute',\r\n                      top: 4,\r\n                      right: 4,\r\n                      color: '#7c3aed',\r\n                      bgcolor: 'rgba(124,58,237,0.1)',\r\n                      border: '1px solid rgba(124,58,237,0.3)',\r\n                      '&:hover': {\r\n                        bgcolor: 'rgba(124,58,237,0.2)',\r\n                        color: '#9333ea'\r\n                      },\r\n                      width: 24,\r\n                      height: 24\r\n                    }}\r\n                  >\r\n                    <ClusterOutlined style={{ fontSize: 12 }} />\r\n                  </IconButton>\r\n                </Box>\r\n              ))}\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* ì‹œê°„ í•„í„°ë§ ì»¨íŠ¸ë¡¤ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ë‚ ì§œ ë²”ìœ„ í•„í„°ë§ ì»¨íŠ¸ë¡¤\"\r\n            sx={{\r\n              bgcolor: '#f0edfd',\r\n              color: '#333',\r\n              border: '1px solid #d0c9f0',\r\n              boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\r\n              flexShrink: 0,\r\n              minHeight: 0\r\n            }}\r\n          >\r\n            <CardContent>\r\n              <Typography \r\n                variant=\"body2\" \r\n                component=\"h3\"\r\n                sx={{ mb: 1, fontWeight: 'bold', color: '#7c3aed' }}\r\n              >\r\n                ë‚ ì§œ ë²”ìœ„ í•„í„°ë§\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ display: 'block', mb: 1, color: '#666' }}>\r\n                {(() => {\r\n                  const startDay = new Date(startDate);\r\n                  startDay.setDate(startDay.getDate() + timeRange[0]);\r\n                  const endDay = new Date(startDate);\r\n                  endDay.setDate(endDay.getDate() + timeRange[1] - 1);\r\n                  return `${startDay.toLocaleDateString('ko-KR')} ~ ${endDay.toLocaleDateString('ko-KR')} (${timeRange[1] - timeRange[0]}ì¼)`;\r\n                })()}\r\n              </Typography>\r\n              <Slider\r\n                aria-label=\"ë‚ ì§œ ë²”ìœ„ ì„ íƒ\"\r\n                value={timeRange}\r\n                onChange={(_, newValue) => setTimeRange(newValue)}\r\n                min={0}\r\n                max={7}\r\n                step={1}\r\n                marks={[\r\n                  { value: 0, label: '9/2' },\r\n                  { value: 1, label: '9/3' },\r\n                  { value: 2, label: '9/4' },\r\n                  { value: 3, label: '9/5' },\r\n                  { value: 4, label: '9/6' },\r\n                  { value: 5, label: '9/7' },\r\n                  { value: 6, label: '9/8' },\r\n                  { value: 7, label: '9/9' }\r\n                ]}\r\n                valueLabelDisplay=\"auto\"\r\n                valueLabelFormat={(value) => {\r\n                  const day = new Date(startDate);\r\n                  day.setDate(day.getDate() + value);\r\n                  return day.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' });\r\n                }}\r\n                sx={{\r\n                  color: '#7c3aed',\r\n                  '& .MuiSlider-thumb': {\r\n                    backgroundColor: '#7c3aed',\r\n                    '&:hover, &.Mui-focusVisible': {\r\n                      boxShadow: '0 0 0 8px rgba(124,58,237, 0.16)',\r\n                    },\r\n                  },\r\n                  '& .MuiSlider-track': {\r\n                    backgroundColor: '#7c3aed',\r\n                  },\r\n                  '& .MuiSlider-rail': {\r\n                    backgroundColor: '#d0c9f0',\r\n                  },\r\n                  '& .MuiSlider-mark': {\r\n                    backgroundColor: '#b8aee0',\r\n                  },\r\n                  '& .MuiSlider-markLabel': {\r\n                    color: '#666',\r\n                    fontSize: '9px',\r\n                  },\r\n                  '& .MuiSlider-valueLabel': {\r\n                    backgroundColor: '#7c3aed',\r\n                    color: '#fff',\r\n                  },\r\n                }}\r\n              />\r\n              <Typography variant=\"caption\" sx={{ display: 'block', mt: 1, color: '#888', fontSize: '10px' }}>\r\n                í‘œì‹œëœ ì‘ì „: {attacks.length}ê°œ / ì „ì²´: {allAttacks.length}ê°œ (í•˜ë£¨ë‹¹ ìµœëŒ€ 20ê°œ)\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* ë²”ë¡€ */}\r\n          <Card \r\n            component=\"section\"\r\n            aria-label=\"ì§€ë„ ë²”ë¡€\"\r\n            sx={{\r\n              bgcolor: '#f0edfd',\r\n              color: '#222',\r\n              boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\r\n              flexShrink: 0,\r\n              minHeight: 0\r\n            }}\r\n          >\r\n            <CardContent>\r\n              <Box component=\"ul\" role=\"list\" sx={{ display: 'flex', flexDirection: 'column', gap: 1, listStyle: 'none', p: 0, m: 0 }}>\r\n                <Box component=\"li\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Box \r\n                    aria-hidden=\"true\"\r\n                    sx={{ width: 12, height: 12, borderRadius: '50%', bgcolor: '#FFFF00', border: '2px solid #FF0000' }} \r\n                  />\r\n                  <Typography variant=\"caption\" sx={{ color: '#222' }}>ê³µê²© ì¶œë°œì§€</Typography>\r\n                </Box>\r\n                <Box component=\"li\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Box \r\n                    aria-hidden=\"true\"\r\n                    sx={{ width: 12, height: 12, borderRadius: '50%', bgcolor: '#00FFFF', border: '2px solid #0000FF' }} \r\n                  />\r\n                  <Typography variant=\"caption\" sx={{ color: '#222' }}>ê³µê²© ëª©í‘œì§€</Typography>\r\n                </Box>\r\n                <Box component=\"li\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Box \r\n                    aria-hidden=\"true\"\r\n                    sx={{ width: 20, height: 2, bgcolor: '#FF0000', borderRadius: 1, boxShadow: '0 0 4px #FF0000' }} \r\n                  />\r\n                  <Typography variant=\"caption\" sx={{ color: '#222' }}>ğŸ”´ ì‚¬ì´ë²„ ì‘ì „</Typography>\r\n                </Box>\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default memo(EarthGlobe);"],"names":["API_CONFIG","COLORS","SOURCE","NORMAL","Cesium.Color","YELLOW","OUTLINE","RED","HIGHLIGHT","ORANGE","TARGET","CYAN","BLUE","LIME","HIGHLIGHT_OUTLINE","WHITE","style","document","createElement","textContent","head","appendChild","Cesium.Ion","defaultAccessToken","generateAS","country","asNumbers","China","Russia","Iran","Japan","Germany","Burundi","default","asList","name","Math","floor","random","length","findAttackById","attacks","attackId","find","attack","id","toString","parseInt","resetEntityColors","entity","entityId","point","isSource","includes","color","outlineColor","outlineWidth","pixelSize","highlightEntity","disableDepthTestDistance","Number","POSITIVE_INFINITY","scrollToLog","el","getElementById","scrollIntoView","behavior","block","animation","setTimeout","fetchAndFormatAttackData","async","startDate","endDate","url","toISOString","response","fetch","ok","Error","status","data","json","success","map","source","building","city","lat","lon","ip","port","subnet","gateway","dns","as","target","type","protocol","severity","min","ceil","count","timestamp","Date","forEach","index","error","TimeSeriesVisualization","memo","navigate","useNavigate","cesiumContainer","useRef","viewer","logListRef","isLoaded","setIsLoaded","useState","setError","setAttacks","allAttacks","setAllAttacks","timeRange","setTimeRange","attackStats","useMemo","total","active","blocked","countries","Set","a","size","filteredAttacks","baseTime","getTime","rangeStartTime","rangeEndTime","filter","attackTime","isInRange","indexOf","useEffect","promises","day","dayStart","UTC","dayEnd","push","then","dayData","slice","catch","allData","Promise","all","flat","initializeAttacks","current","Cesium.Viewer","baseLayerPicker","fullscreenButton","geocoder","homeButton","infoBox","sceneModePicker","scene3DOnly","selectionIndicator","timeline","navigationHelpButton","navigationInstructionsInitiallyVisible","terrainProvider","Cesium.createWorldTerrainAsync","requestWaterMask","requestVertexNormals","requestRenderMode","maximumRenderTimeChange","Infinity","buildingTileset","Cesium.Cesium3DTileset","fromIonAssetId","scene","primitives","add","bingProvider","Cesium.createWorldImageryAsync","Cesium.IonWorldImageryStyle","AERIAL_WITH_LABELS","imageryLayers","addImageryProvider","globe","skyAtmosphere","show","fog","enabled","density","screenSpaceErrorFactor","enableLighting","dynamicAtmosphereLighting","atmosphereLightIntensity","showWaterEffect","maximumScreenSpaceError","tileCacheSize","screenSpaceCameraController","enableRotate","enableTranslate","enableZoom","enableTilt","enableLook","enableInputs","minimumZoomDistance","maximumZoomDistance","constrainedAxis","Cesium.Cartesian3","UNIT_Z","inertiaSpin","inertiaTranslate","inertiaZoom","zoomFactor","wheelZoomFactor","cesiumWidget","creditContainer","display","screenSpaceEventHandler","setInputAction","event","cartesian","camera","pickEllipsoid","position","ellipsoid","cartographic","Cesium.Cartographic","fromCartesian","Cesium.Math","toDegrees","longitude","latitude","height","Cesium.ScreenSpaceEventType","LEFT_CLICK","northKoreaView","destination","fromDegrees","orientation","heading","pitch","PI_OVER_TWO","roll","setView","viewModel","command","beforeExecute","addEventListener","e","cancel","Cesium.FeatureDetection","supportsImageRenderingPixelated","resolutionScale","window","devicePixelRatio","postProcessStages","fxaa","clock","shouldAnimate","multiplier","currentTime","Cesium.JulianDate","now","animationFrameId","forceRender","isDestroyed","requestRender","requestAnimationFrame","clockIntervalId","setInterval","tick","_cleanupIds","message","initializeCesium","cancelAnimationFrame","clearInterval","destroy","animationEntities","setAnimationEntities","selectedAttackId","setSelectedAttackId","selectedBuildingAttacks","setSelectedBuildingAttacks","highlightedBuildings","setHighlightedBuildings","markerHighlights","setMarkerHighlights","clearAllHighlights","useCallback","entities","values","i","startsWith","highlightBuildingOnMap","getById","targetPrefix","sourcePrefix","targetEntity","sourceEntity","newHighlighted","highlightBuildingAttacks","clickedAttack","clickedBuildingName","relatedAttacks","newMarkerHighlights","sourceEntityId","targetEntityId","relatedAttackIds","clickedIP","removeAll","interval","beamColor","startTime","sourceLon","parseFloat","sourceLat","targetLon","targetLat","isNaN","markerHeight3D","sourceMarkerPos","targetMarkerPos","sourceBuildingPos","targetBuildingPos","heightReference","Cesium.HeightReference","NONE","scaleByDistance","Cesium.NearFarScalar","buildingData","polyline","positions","width","material","withAlpha","clampToGround","segmentProgress","lerpedPos","lerp","archHeight","sin","PI","toCartesian","Cesium.PolylineGlowMaterialProperty","glowPower","Cesium.CallbackProperty","time","progress","secondsDifference","alpha","fromCssColorString","description","attackData","create3DEntities","removeInputAction","LEFT_DOUBLE_CLICK","click","pickedObject","pick","_id","isSourceBuilding","isTargetBuilding","replace","isSourceMarker","isTargetMarker","getValue","flyTo","duration","complete","jsxs","Box","sx","flexDirection","alignItems","justifyContent","bgcolor","borderRadius","p","children","jsx","Typography","mb","textAlign","variant","Card","component","role","boxShadow","m","CardContent","pb","xs","lg","gap","overflow","flex","border","ref","top","left","background","padding","fontSize","maxWidth","minHeight","flexShrink","Grid","container","spacing","item","fontWeight","tabIndex","borderLeft","cursor","transition","onClick","newSelectedId","toLocaleString","timeZone","year","month","hour","minute","second","IconButton","title","stopPropagation","right","ClusterOutlined","startDay","setDate","getDate","endDay","toLocaleDateString","Slider","value","onChange","_","newValue","max","step","marks","label","valueLabelDisplay","valueLabelFormat","backgroundColor","mt","listStyle"],"mappings":"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"}